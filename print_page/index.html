
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Elasticsearch Documentation">
      
      
      
      
      
      
      <link rel="icon" href="../assets/images/computacenter-logo.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.8">
    
    
      
        <title>Elasticsearch Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.f2e4d321.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      
  
  
    
    
  
  
  <style>:root{--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.25 12a.75.75 0 0 1-.22.53l-2.75 2.75a.75.75 0 0 1-1.06-1.06L7.44 12 5.22 9.78a.75.75 0 1 1 1.06-1.06l2.75 2.75c.141.14.22.331.22.53Zm2 2a.75.75 0 0 0 0 1.5h5a.75.75 0 0 0 0-1.5h-5Z"/><path d="M0 4.75C0 3.784.784 3 1.75 3h20.5c.966 0 1.75.784 1.75 1.75v14.5A1.75 1.75 0 0 1 22.25 21H1.75A1.75 1.75 0 0 1 0 19.25Zm1.75-.25a.25.25 0 0 0-.25.25v14.5c0 .138.112.25.25.25h20.5a.25.25 0 0 0 .25-.25V4.75a.25.25 0 0 0-.25-.25Z"/></svg>');}</style>



    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/print-site-enum-headings1.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings2.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings3.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings4.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings5.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings6.css">
    
      <link rel="stylesheet" href="../css/print-site.css">
    
      <link rel="stylesheet" href="../css/print-site-material.css">
    
      <link rel="stylesheet" href="../assets/stylesheets/extra.css">
    
      <link rel="stylesheet" href="../assets/stylesheets/tables.css">
    
    <script>__md_scope=new URL("/",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  
        <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', function () {
            remove_material_navigation();remove_mkdocs_theme_navigation();generate_toc();
        })
        </script>
        </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Elasticsearch Documentation" class="md-header__button md-logo" aria-label="Elasticsearch Documentation" data-md-component="logo">
      
  <img src="../assets/images/computacenter-logo-white.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Elasticsearch Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/PhilippRenk/elasticsearch_documentation" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    PhilippRenk/elasticsearch_documentation
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Elasticsearch Documentation" class="md-nav__button md-logo" aria-label="Elasticsearch Documentation" data-md-component="logo">
      
  <img src="../assets/images/computacenter-logo-white.png" alt="logo">

    </a>
    Elasticsearch Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/PhilippRenk/elasticsearch_documentation" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    PhilippRenk/elasticsearch_documentation
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Willkommen auf der Elasticsearch Dokumentation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../01_installation_one_node/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#" class="md-nav__link">
    <span class="md-ellipsis">
      1. Willkommen auf der Elasticsearch Dokumentation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#01_installation_one_node" class="md-nav__link">
    <span class="md-ellipsis">
      2. Installation
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<div id="print-site-page" class="print-site-enumerate-headings print-site-enumerate-figures">
        <section id="print-site-cover-page">
            <div>

    
        <h1>Elasticsearch Documentation</h1>
    

</div>

<p>
    <img src="../assets/images/computacenter.png" width=500/>
</p>


<p>
    Elasticsearch Documentation
</p>



<p>
    <em>Copyright &copy; Computacenter 2024</em>
</p>

        </section>
        
        <div id="print-site-banner">
            <p>
    <b><em>This box will disappear when printing!</em></b>
</p>
<p>This page has combined all site pages into one. This cover page and a table of contents will be added.</p>
<p>You can export to PDF using <b>File > Print > Save as PDF</b> (or use <b>Ctrl-P</b> and set to <b>Save as PDF</b>).</p>
<p>See also <a href="https://timvink.github.io/mkdocs-print-site-plugin/how-to/export-PDF.html">Export to PDF</a>.</p>
        </div>
        
        <section class="print-page">
            <div id="print-page-toc" data-toc-depth="3">
                <nav role='navigation' class='print-page-toc-nav'>
                <h1 class='print-page-toc-title'>Table of Contents</h1>
                </nav>
            </div>
        </section>
        <section class="print-page" id="index"><h1 id="index-willkommen-auf-der-elasticsearch-dokumentation">Willkommen auf der Elasticsearch Dokumentation</h1>
<p>Dieses Dokument/Seite soll Informationen für das Arbeiten mit Elasticsearch sein. 
Es sollen Anleitungen, Use Cases, Erklärungen und Best Practices gesammelt werden. </p>
<p>Diese Seite wird laufend aktualisiert.</p></section><section class="print-page" id="01_installation_one_node"><h1 id="01_installation_one_node-installation">Installation</h1>
<h1 id="01_installation_one_node-elasticsearch">Elasticsearch</h1>
<h1 id="01_installation_one_node-umgebung">Umgebung:</h1>
<p><em>Link</em>:                    https://www.elastic.co/guide/en/elasticsearch/reference/current/rpm.html
<em>OS:</em>                      Centos Stream 9
Virtualisierung:   vSphere
Server A:             Elasticsearch, Kibana
Server B:             Logstash, Filebeat, Python Scripts
Voraussetzung:   JAVA JDK Version</p>
<h1 id="01_installation_one_node-server-a">Server A</h1>
<h1 id="01_installation_one_node-elasticsearch-installation">Elasticsearch Installation</h1>
<p>Per Repo-Einbindung Elastic installieren:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#01_installation_one_node-__codelineno-0-1"></a>cd /etc/yum.repos.d/
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#01_installation_one_node-__codelineno-0-2"></a>sudo vim elasticsearch.repo
</code></pre></div>
Info: Repo sollte für alle drei Komponenten ausreichen (Elastic, Filebeat, Kibana)
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#01_installation_one_node-__codelineno-1-1"></a>[elasticsearch]
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#01_installation_one_node-__codelineno-1-2"></a>name=Elastic repository for 8.x packages
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#01_installation_one_node-__codelineno-1-3"></a>baseurl=https://artifacts.elastic.co/packages/8.x/yum
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#01_installation_one_node-__codelineno-1-4"></a>gpgcheck=1
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#01_installation_one_node-__codelineno-1-5"></a>gpgkey=https://artifacts.elastic.co/GPG-KEY-elasticsearch
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#01_installation_one_node-__codelineno-1-6"></a>enabled=1
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#01_installation_one_node-__codelineno-1-7"></a>autorefresh=1
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#01_installation_one_node-__codelineno-1-8"></a>type=rpm-md
</code></pre></div></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#01_installation_one_node-__codelineno-2-1"></a>Optional (nur unter RHEL9): update-crypto-policies --set DEFAULT:SHA1
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#01_installation_one_node-__codelineno-2-2"></a>sudo dnf install --enablerepo=elasticsearch elasticsearch
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#01_installation_one_node-__codelineno-2-3"></a>systemctl daemon-reload
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#01_installation_one_node-__codelineno-2-4"></a>systemctl enable elasticsearch
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#01_installation_one_node-__codelineno-2-5"></a>systemctl start elasticsearch
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#01_installation_one_node-__codelineno-2-6"></a>firewall-cmd --add-port=9200/tcp --permanent
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#01_installation_one_node-__codelineno-2-7"></a>firewall-cmd --reload
</code></pre></div>
<p><em>Lesson learned</em> = Es wird ein <em>elastic</em> (Superuser) Passwort nach der Installation im Terminal ausgegeben. Das Passwort ist wichtig für den Zugang zu Elasticsearch. Also am besten speichern. Elasticsearch gibt in der Doku an, das Passwort in eine Umgebungsvariable zu speichern. Erscheint mir unsicher, aber für lokale Instanzen zum ausprobieren sollte es okay sein.  In Elasticsearch 8+ sind die Sicherheitseinstellungen an. Das bedeutet, dass in der elasticsearch.yml mehr Optionen in der eingetragen werden müssen als die initiale Doku zeigt.
<em>Lesson learned</em> = Entweder über eine .repo Datei oder über ein wget die Installation ermöglichen</p>
<p><strong>Konfiguration</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#01_installation_one_node-__codelineno-3-1"></a>sudo vim /etc/elasticsearch/elasticsearch.yml
</code></pre></div></p>
<p>Entferne die # vor den Einträgen:
    network.host: localhost 
Zusätzlich müssen noch die Pfade für <em>xpack.security.http</em> und <em>xpack.security.transport</em> gesetzt werden.
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#01_installation_one_node-__codelineno-4-1"></a>    #-------------------------------Node------------------
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#01_installation_one_node-__codelineno-4-2"></a>    node.name: localhost
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#01_installation_one_node-__codelineno-4-3"></a>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#01_installation_one_node-__codelineno-4-4"></a>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#01_installation_one_node-__codelineno-4-5"></a>    # Set the bind address to a specific IP (IPv4 or IPv6): 
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#01_installation_one_node-__codelineno-4-6"></a>     network.host: localhost 
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#01_installation_one_node-__codelineno-4-7"></a>    #
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#01_installation_one_node-__codelineno-4-8"></a>    # Set a custom port for HTTP: 
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#01_installation_one_node-__codelineno-4-9"></a>     http.port: 9200                                               # Muss nicht unbedingt gesetzt werden, da der Default 9300 ist.
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#01_installation_one_node-__codelineno-4-10"></a>    # elasticsearch.host: [&quot;http://localhost:9200&quot;]
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#01_installation_one_node-__codelineno-4-11"></a>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#01_installation_one_node-__codelineno-4-12"></a>    # --------------------------------- Discovery ----------------------------------
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#01_installation_one_node-__codelineno-4-13"></a>    #
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#01_installation_one_node-__codelineno-4-14"></a>    # Pass an initial list of hosts to perform discovery when this node is started:
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#01_installation_one_node-__codelineno-4-15"></a>    # The default list of hosts is [&quot;127.0.0.1&quot;, &quot;[::1]&quot;]
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#01_installation_one_node-__codelineno-4-16"></a>    #
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#01_installation_one_node-__codelineno-4-17"></a>    discovery.seed_hosts: [&quot;127.0.0.1&quot;]
<a id="__codelineno-4-18" name="__codelineno-4-18" href="#01_installation_one_node-__codelineno-4-18"></a>    #
<a id="__codelineno-4-19" name="__codelineno-4-19" href="#01_installation_one_node-__codelineno-4-19"></a>    # Bootstrap the cluster using an initial set of master-eligible nodes:
<a id="__codelineno-4-20" name="__codelineno-4-20" href="#01_installation_one_node-__codelineno-4-20"></a>    #
<a id="__codelineno-4-21" name="__codelineno-4-21" href="#01_installation_one_node-__codelineno-4-21"></a>    #----------------------- BEGIN SECURITY AUTO CONFIGURATION -----------------------
<a id="__codelineno-4-22" name="__codelineno-4-22" href="#01_installation_one_node-__codelineno-4-22"></a>    #
<a id="__codelineno-4-23" name="__codelineno-4-23" href="#01_installation_one_node-__codelineno-4-23"></a>    # The following settings, TLS certificates, and keys have been automatically      
<a id="__codelineno-4-24" name="__codelineno-4-24" href="#01_installation_one_node-__codelineno-4-24"></a>    # generated to configure Elasticsearch security features on 28-08-2023 14:32:16
<a id="__codelineno-4-25" name="__codelineno-4-25" href="#01_installation_one_node-__codelineno-4-25"></a>    #
<a id="__codelineno-4-26" name="__codelineno-4-26" href="#01_installation_one_node-__codelineno-4-26"></a>    # --------------------------------------------------------------------------------
<a id="__codelineno-4-27" name="__codelineno-4-27" href="#01_installation_one_node-__codelineno-4-27"></a>
<a id="__codelineno-4-28" name="__codelineno-4-28" href="#01_installation_one_node-__codelineno-4-28"></a>    # Enable security features
<a id="__codelineno-4-29" name="__codelineno-4-29" href="#01_installation_one_node-__codelineno-4-29"></a>
<a id="__codelineno-4-30" name="__codelineno-4-30" href="#01_installation_one_node-__codelineno-4-30"></a>    xpack.security.enabled: true
<a id="__codelineno-4-31" name="__codelineno-4-31" href="#01_installation_one_node-__codelineno-4-31"></a>    xpack.security.enrollment.enabled: true
<a id="__codelineno-4-32" name="__codelineno-4-32" href="#01_installation_one_node-__codelineno-4-32"></a>
<a id="__codelineno-4-33" name="__codelineno-4-33" href="#01_installation_one_node-__codelineno-4-33"></a>    # Enable encryption for HTTP API client connections, such as Kibana, Logstash, and Agents
<a id="__codelineno-4-34" name="__codelineno-4-34" href="#01_installation_one_node-__codelineno-4-34"></a>    xpack.security.http.ssl:
<a id="__codelineno-4-35" name="__codelineno-4-35" href="#01_installation_one_node-__codelineno-4-35"></a>      enabled: true
<a id="__codelineno-4-36" name="__codelineno-4-36" href="#01_installation_one_node-__codelineno-4-36"></a>      keystore.path: /etc/elasticsearch/certs/http.p12
<a id="__codelineno-4-37" name="__codelineno-4-37" href="#01_installation_one_node-__codelineno-4-37"></a>
<a id="__codelineno-4-38" name="__codelineno-4-38" href="#01_installation_one_node-__codelineno-4-38"></a>    # Enable encryption and mutual authentication between cluster nodes
<a id="__codelineno-4-39" name="__codelineno-4-39" href="#01_installation_one_node-__codelineno-4-39"></a>    xpack.security.transport.ssl:
<a id="__codelineno-4-40" name="__codelineno-4-40" href="#01_installation_one_node-__codelineno-4-40"></a>      enabled: true
<a id="__codelineno-4-41" name="__codelineno-4-41" href="#01_installation_one_node-__codelineno-4-41"></a>      verification_mode: certificate
<a id="__codelineno-4-42" name="__codelineno-4-42" href="#01_installation_one_node-__codelineno-4-42"></a>      keystore.path: /etc/elasticsearch/certs/transport.p12
<a id="__codelineno-4-43" name="__codelineno-4-43" href="#01_installation_one_node-__codelineno-4-43"></a>      truststore.path: /etc/elasticsearch/certs/certs/transport.p12
<a id="__codelineno-4-44" name="__codelineno-4-44" href="#01_installation_one_node-__codelineno-4-44"></a>    # Create a new cluster with the current node only
<a id="__codelineno-4-45" name="__codelineno-4-45" href="#01_installation_one_node-__codelineno-4-45"></a>    # Additional nodes can still join the cluster later
<a id="__codelineno-4-46" name="__codelineno-4-46" href="#01_installation_one_node-__codelineno-4-46"></a>    cluster.initial_master_nodes: [&quot;localhost.localdomain&quot;]
</code></pre></div></p>
<p>Das bei der Installation erschaffenene Zertifikat muss noch per <code>scp</code> an den Server B (auf dem Logstash installiert wird) kopiert werden und in dem Ordner hinterlegt werden, der in der <code>logstash.yml</code> angegeben ist. </p>
<p><strong>Keystore</strong> 
(Muss ich mir noch genauer Anschauen)
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#01_installation_one_node-__codelineno-5-1"></a>Nur wenn unter /etc/elasticsearch/ noch nicht enthalten ist:
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#01_installation_one_node-__codelineno-5-2"></a>/usr/share/elasticsearch/bin/elasticsearch-keystore create
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#01_installation_one_node-__codelineno-5-3"></a>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#01_installation_one_node-__codelineno-5-4"></a>Passwort immer neu setzen:
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#01_installation_one_node-__codelineno-5-5"></a>/usr/share/elasticsearch/bin/elasticsearch-keystore passwd
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#01_installation_one_node-__codelineno-5-6"></a>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#01_installation_one_node-__codelineno-5-7"></a>Passwort für den Http.Keystore abfragen. Dies ist für die Konfiguration von Logstash wichtig.
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#01_installation_one_node-__codelineno-5-8"></a>/usr/share/elasticsearch/bin/elasticsearch-keystore show xpack.security.http.ssl.keystore.secure_password
</code></pre></div></p>
<p>Um eine CA zu erstellen, muss folgender Befehl eingegeben werden:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#01_installation_one_node-__codelineno-6-1"></a>Erstellt eine CA:
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#01_installation_one_node-__codelineno-6-2"></a>/usr/share/elasticsearch/bin/elasticsearch-certutil ca
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#01_installation_one_node-__codelineno-6-3"></a>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#01_installation_one_node-__codelineno-6-4"></a>Erstellt ein Cert(braucht man aber bei einem Server nicht, da Initial Certs mitkommen):
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#01_installation_one_node-__codelineno-6-5"></a>/usr/share/elasticsearch/bin/elasticsearch-certutil cert --ca elastic-stack-ca.p12
</code></pre></div>
<p><em>Lesson learned:</em> In Elastic 8 oder neu wird SSL im Default aktiviert</p>
<p>Der Server muss dann rebootet werden.</p>
<h1 id="01_installation_one_node-kibana-installation">Kibana Installation</h1>
<p>Kibana Repo unter <code>/etc/yum.repos.d/kibana.repo</code> anlegen.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#01_installation_one_node-__codelineno-7-1"></a>sudo dnf install kibana
</code></pre></div>
<p><strong>Konfiguration</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#01_installation_one_node-__codelineno-8-1"></a>sudo vim /etc/kibana/kibana.yml
</code></pre></div></p>
<p>Entferne die # vor den Einträgen:
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#01_installation_one_node-__codelineno-9-1"></a>server.port: 5601
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#01_installation_one_node-__codelineno-9-2"></a>server.host: &quot;localhost&quot;                          # Alternative hier eine IP Addresse ohne &quot;&quot; eintragen
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#01_installation_one_node-__codelineno-9-3"></a>elasticsearch.hosts: [&quot;https://localhost:9200&quot;]
</code></pre></div></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#01_installation_one_node-__codelineno-10-1"></a>systemctl start kibana
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#01_installation_one_node-__codelineno-10-2"></a>systemctl enable kibana
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#01_installation_one_node-__codelineno-10-3"></a>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#01_installation_one_node-__codelineno-10-4"></a>firewall-cmd --add-port=5601/tcp --permanent
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#01_installation_one_node-__codelineno-10-5"></a>firewall-cmd --reload
</code></pre></div>
<p>Einen Enrollment-Token für Kibana erstellen:
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#01_installation_one_node-__codelineno-11-1"></a>/usr/share/elasticsearch/bin/elasticsearch-create-enrollment-token --scope kibana
</code></pre></div>
Den Token auf "localhost:5601" im Browser eingeben.
Auf dem Server einen Verifizierungs-Code erstellen und im Browser eingeben:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#01_installation_one_node-__codelineno-12-1"></a>/usr/share/kibana/bin/kibana-verification-code
</code></pre></div>
<h1 id="01_installation_one_node-server-a_1">Server A</h1>
<h2 id="01_installation_one_node-install-logstash">Install Logstash</h2>
<h3 id="01_installation_one_node-user-anlegen">User anlegen:</h3>
<p>In Kibana (auf Server A) muss unter Management -&gt; Dev Tools per API ein User <code>logstash_writer</code> und die Rolle <code>logstash_writer_role</code> erstellt werden.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#01_installation_one_node-__codelineno-13-1"></a>POST /_security/role/logstash_write_role
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#01_installation_one_node-__codelineno-13-2"></a>{
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#01_installation_one_node-__codelineno-13-3"></a>    &quot;cluster&quot;: [
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#01_installation_one_node-__codelineno-13-4"></a>      &quot;monitor&quot;,
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#01_installation_one_node-__codelineno-13-5"></a>      &quot;manage_index_templates&quot;
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#01_installation_one_node-__codelineno-13-6"></a>    ],
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#01_installation_one_node-__codelineno-13-7"></a>    &quot;indices&quot;: [
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#01_installation_one_node-__codelineno-13-8"></a>      {
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#01_installation_one_node-__codelineno-13-9"></a>        &quot;names&quot;: [
<a id="__codelineno-13-10" name="__codelineno-13-10" href="#01_installation_one_node-__codelineno-13-10"></a>           &quot;filebeat*&quot;
<a id="__codelineno-13-11" name="__codelineno-13-11" href="#01_installation_one_node-__codelineno-13-11"></a>        ],
<a id="__codelineno-13-12" name="__codelineno-13-12" href="#01_installation_one_node-__codelineno-13-12"></a>        &quot;privileges&quot;: [
<a id="__codelineno-13-13" name="__codelineno-13-13" href="#01_installation_one_node-__codelineno-13-13"></a>          &quot;write&quot;,
<a id="__codelineno-13-14" name="__codelineno-13-14" href="#01_installation_one_node-__codelineno-13-14"></a>          &quot;create_index&quot;
<a id="__codelineno-13-15" name="__codelineno-13-15" href="#01_installation_one_node-__codelineno-13-15"></a>        ],
<a id="__codelineno-13-16" name="__codelineno-13-16" href="#01_installation_one_node-__codelineno-13-16"></a>        &quot;field_security&quot;: {
<a id="__codelineno-13-17" name="__codelineno-13-17" href="#01_installation_one_node-__codelineno-13-17"></a>          &quot;grant&quot;: [
<a id="__codelineno-13-18" name="__codelineno-13-18" href="#01_installation_one_node-__codelineno-13-18"></a>            &quot;*&quot;
<a id="__codelineno-13-19" name="__codelineno-13-19" href="#01_installation_one_node-__codelineno-13-19"></a>          ]
<a id="__codelineno-13-20" name="__codelineno-13-20" href="#01_installation_one_node-__codelineno-13-20"></a>        }
<a id="__codelineno-13-21" name="__codelineno-13-21" href="#01_installation_one_node-__codelineno-13-21"></a>      }
<a id="__codelineno-13-22" name="__codelineno-13-22" href="#01_installation_one_node-__codelineno-13-22"></a>    ],
<a id="__codelineno-13-23" name="__codelineno-13-23" href="#01_installation_one_node-__codelineno-13-23"></a>    &quot;run_as&quot;: [],
<a id="__codelineno-13-24" name="__codelineno-13-24" href="#01_installation_one_node-__codelineno-13-24"></a>    &quot;metadata&quot;: {},
<a id="__codelineno-13-25" name="__codelineno-13-25" href="#01_installation_one_node-__codelineno-13-25"></a>    &quot;transient_metadata&quot;: {
<a id="__codelineno-13-26" name="__codelineno-13-26" href="#01_installation_one_node-__codelineno-13-26"></a>      &quot;enabled&quot;: true
<a id="__codelineno-13-27" name="__codelineno-13-27" href="#01_installation_one_node-__codelineno-13-27"></a>    }
<a id="__codelineno-13-28" name="__codelineno-13-28" href="#01_installation_one_node-__codelineno-13-28"></a>}
<a id="__codelineno-13-29" name="__codelineno-13-29" href="#01_installation_one_node-__codelineno-13-29"></a>
<a id="__codelineno-13-30" name="__codelineno-13-30" href="#01_installation_one_node-__codelineno-13-30"></a>POST /_security/user/logstash_writer
<a id="__codelineno-13-31" name="__codelineno-13-31" href="#01_installation_one_node-__codelineno-13-31"></a>{
<a id="__codelineno-13-32" name="__codelineno-13-32" href="#01_installation_one_node-__codelineno-13-32"></a>  &quot;username&quot;: &quot;logstash_writer&quot;,
<a id="__codelineno-13-33" name="__codelineno-13-33" href="#01_installation_one_node-__codelineno-13-33"></a>  &quot;roles&quot;: [
<a id="__codelineno-13-34" name="__codelineno-13-34" href="#01_installation_one_node-__codelineno-13-34"></a>    &quot;logstash_write_role&quot;
<a id="__codelineno-13-35" name="__codelineno-13-35" href="#01_installation_one_node-__codelineno-13-35"></a>  ],
<a id="__codelineno-13-36" name="__codelineno-13-36" href="#01_installation_one_node-__codelineno-13-36"></a>  &quot;full_name&quot;: null,
<a id="__codelineno-13-37" name="__codelineno-13-37" href="#01_installation_one_node-__codelineno-13-37"></a>  &quot;email&quot;: null,
<a id="__codelineno-13-38" name="__codelineno-13-38" href="#01_installation_one_node-__codelineno-13-38"></a>  &quot;password&quot;: &quot;PASSWORD&quot;,
<a id="__codelineno-13-39" name="__codelineno-13-39" href="#01_installation_one_node-__codelineno-13-39"></a>  &quot;enabled&quot;: true
<a id="__codelineno-13-40" name="__codelineno-13-40" href="#01_installation_one_node-__codelineno-13-40"></a>}
</code></pre></div>
<p>Mit <code>/user/share/elasticsearch/bin/elasticsearch_reset_password -u logstash_writer</code> muss das Passwort neu gesetzt werden und dann per Dev Tools in Kibana gesetzt werden.</p>
<h3 id="01_installation_one_node-zertifikate-ubertragen">Zertifikate übertragen</h3>
<p>Übertragung des Zertifikats per
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#01_installation_one_node-__codelineno-14-1"></a>scp<span class="w"> </span>path/to/http_ca.crt<span class="w"> </span>user@IP:/home/user
</code></pre></div></p>
<p>Übertragung des SSL-Keys per 
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#01_installation_one_node-__codelineno-15-1"></a>scp<span class="w"> </span>path/to/http.p12<span class="w"> </span>user@IP:/home/user
</code></pre></div></p>
<h1 id="01_installation_one_node-server-b">Server B</h1>
<p><strong>Installation</strong>
Installation von Logstash auf dem Server.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#01_installation_one_node-__codelineno-16-1"></a>vim /etc/yum.repos.d/logstash.repo
</code></pre></div>
Repo-Datei: logstash.repo
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#01_installation_one_node-__codelineno-17-1"></a>[logstash-8.x]
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#01_installation_one_node-__codelineno-17-2"></a>name=Elastic repository for 8.x packages
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#01_installation_one_node-__codelineno-17-3"></a>baseurl=https://artifacts.elastic.co/packages/8.x/yum
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#01_installation_one_node-__codelineno-17-4"></a>gpgcheck=1
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#01_installation_one_node-__codelineno-17-5"></a>gpgkey=https://artifacts.elastic.co/GPG-KEY-elasticsearch
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#01_installation_one_node-__codelineno-17-6"></a>enabled=1
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#01_installation_one_node-__codelineno-17-7"></a>autorefresh=1
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#01_installation_one_node-__codelineno-17-8"></a>type=rpm-md
</code></pre></div>
Logstash über die Kommandozeile installieren und Zertifikate in ein Verzeichnis ablegen. Zusätzlich müssen dann die User/Group Berechtigungen von root auf logstash geändert werden, damit Logstash die Zertifikate finden und nutzen kann.
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#01_installation_one_node-__codelineno-18-1"></a># Installation
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#01_installation_one_node-__codelineno-18-2"></a>dnf install logstash
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#01_installation_one_node-__codelineno-18-3"></a>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#01_installation_one_node-__codelineno-18-4"></a># Erstellung des Ordners für die Zertifikate und der Kopiervorgang
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#01_installation_one_node-__codelineno-18-5"></a>mkdir /etc/logstash/certs
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#01_installation_one_node-__codelineno-18-6"></a>cp /home/user/http* /etc/logstash/certs/
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#01_installation_one_node-__codelineno-18-7"></a>
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#01_installation_one_node-__codelineno-18-8"></a># Änderung der Rechte
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#01_installation_one_node-__codelineno-18-9"></a>chown -R logstash:logstash /etc/logstash/
</code></pre></div>
<strong>Konfiguration</strong>
Die Konfigurations-Datei von Logstash bearbeiten
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#01_installation_one_node-__codelineno-19-1"></a>vim /etc/logstash/logstash.yml
</code></pre></div>
Entscheidend sind die X-Pack bzw SSL -Einstellungen:
(Für den logstash_system User muss entweder das Passwort auf dem Elasticserver neu generiert werden oder man kennt es schon)
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#01_installation_one_node-__codelineno-20-1"></a># X-Pack Management
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#01_installation_one_node-__codelineno-20-2"></a>xpack.management.enabled: true
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#01_installation_one_node-__codelineno-20-3"></a>xpack.management.elasticsearch.username: logstash_system
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#01_installation_one_node-__codelineno-20-4"></a>xpack.management.elasticsearch.password: &#39;PASSWORD&#39;
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#01_installation_one_node-__codelineno-20-5"></a>xpack.management.elasticsearch.hosts: &quot;https://IP:9200&quot;
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#01_installation_one_node-__codelineno-20-6"></a>xpack.management.elasticsearch.ssl.certificate_authority: &quot;/etc/logstash/certs/http_ca.crt&quot;
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#01_installation_one_node-__codelineno-20-7"></a>xpack.management.elasticsearch.ssl.certificate: &quot;/etc/logstash/certs/http_ca.crt&quot;
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#01_installation_one_node-__codelineno-20-8"></a>xpack.management.elasticsearch.ssl.key: &quot;/etc/logstash/certs/http.p12&quot;
</code></pre></div></p>
<p>Es muss eine Konfigurationsdatei für die Pipeline von Filebeat -&gt; Logstash -&gt; Elasticsearch konfiguriert werden.
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#01_installation_one_node-__codelineno-21-1"></a>vim /etc/logstash/conf.d/logstash.conf
</code></pre></div>
<em>Lesson learned:</em> Die Conf-Dateien müssen unter conf.d stehen
<em>Lesson learned</em>: SSL ist bei Logstash auch ein "Problem".
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#01_installation_one_node-__codelineno-22-1"></a>input {
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#01_installation_one_node-__codelineno-22-2"></a>  beats {
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#01_installation_one_node-__codelineno-22-3"></a>     port =&gt; 5044
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#01_installation_one_node-__codelineno-22-4"></a>     }
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#01_installation_one_node-__codelineno-22-5"></a>}
<a id="__codelineno-22-6" name="__codelineno-22-6" href="#01_installation_one_node-__codelineno-22-6"></a>
<a id="__codelineno-22-7" name="__codelineno-22-7" href="#01_installation_one_node-__codelineno-22-7"></a>filter {    #&lt;---- Hier kann der Filter definiert werden
<a id="__codelineno-22-8" name="__codelineno-22-8" href="#01_installation_one_node-__codelineno-22-8"></a>  grok {
<a id="__codelineno-22-9" name="__codelineno-22-9" href="#01_installation_one_node-__codelineno-22-9"></a>    match =&gt; {}
<a id="__codelineno-22-10" name="__codelineno-22-10" href="#01_installation_one_node-__codelineno-22-10"></a>  }
<a id="__codelineno-22-11" name="__codelineno-22-11" href="#01_installation_one_node-__codelineno-22-11"></a>  date {
<a id="__codelineno-22-12" name="__codelineno-22-12" href="#01_installation_one_node-__codelineno-22-12"></a>    match =&gt; []
<a id="__codelineno-22-13" name="__codelineno-22-13" href="#01_installation_one_node-__codelineno-22-13"></a>    target =&gt; &quot;&quot;
<a id="__codelineno-22-14" name="__codelineno-22-14" href="#01_installation_one_node-__codelineno-22-14"></a>  }
<a id="__codelineno-22-15" name="__codelineno-22-15" href="#01_installation_one_node-__codelineno-22-15"></a>}
<a id="__codelineno-22-16" name="__codelineno-22-16" href="#01_installation_one_node-__codelineno-22-16"></a>
<a id="__codelineno-22-17" name="__codelineno-22-17" href="#01_installation_one_node-__codelineno-22-17"></a>output {
<a id="__codelineno-22-18" name="__codelineno-22-18" href="#01_installation_one_node-__codelineno-22-18"></a>  elasticsearch {
<a id="__codelineno-22-19" name="__codelineno-22-19" href="#01_installation_one_node-__codelineno-22-19"></a>    hosts =&gt; [&quot;https://IP:9200&quot;]
<a id="__codelineno-22-20" name="__codelineno-22-20" href="#01_installation_one_node-__codelineno-22-20"></a>    index =&gt; &quot;%{[@metadata][beat]}-%{[@metadata][version]}&quot;
<a id="__codelineno-22-21" name="__codelineno-22-21" href="#01_installation_one_node-__codelineno-22-21"></a>    cacert =&gt; &#39;/etc/logstash/certs/http_ca_crt&#39;    #&lt;--- Kann natürlich Variable sein
<a id="__codelineno-22-22" name="__codelineno-22-22" href="#01_installation_one_node-__codelineno-22-22"></a>    user =&gt; &quot;logstash_writer&quot;
<a id="__codelineno-22-23" name="__codelineno-22-23" href="#01_installation_one_node-__codelineno-22-23"></a>    password =&gt; &quot;PASSWORD&quot;
<a id="__codelineno-22-24" name="__codelineno-22-24" href="#01_installation_one_node-__codelineno-22-24"></a>    ssl =&gt; true
<a id="__codelineno-22-25" name="__codelineno-22-25" href="#01_installation_one_node-__codelineno-22-25"></a>  }
<a id="__codelineno-22-26" name="__codelineno-22-26" href="#01_installation_one_node-__codelineno-22-26"></a>}
</code></pre></div></p>
<p>Konfig testen:
/usr/share/logstash/bin/logstash -f /etc/logstash/conf.d/logstash.conf --config.test_and_exit</p>
<h1 id="01_installation_one_node-install-filebeat">Install Filebeat</h1>
<p><strong>Installation</strong>
Stelle sicher, dass Kibana läuft</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#01_installation_one_node-__codelineno-23-1"></a>dnf install filebeat
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#01_installation_one_node-__codelineno-23-2"></a>
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#01_installation_one_node-__codelineno-23-3"></a>sudo filebeat modules enable system
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#01_installation_one_node-__codelineno-23-4"></a>
<a id="__codelineno-23-5" name="__codelineno-23-5" href="#01_installation_one_node-__codelineno-23-5"></a>vim /etc/filebeat/filebeat.yml
</code></pre></div>
Die filebeat.yml ist die Konfig-Datei für Filebeat.</p>
<p><strong>Konfiguration</strong>
Auf jeder Maschine muss eine Filebeat/Beat Konfigurationsdatei angelegt werden. 
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#01_installation_one_node-__codelineno-24-1"></a>...
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#01_installation_one_node-__codelineno-24-2"></a>#----------------Filebeat Input--------------------
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#01_installation_one_node-__codelineno-24-3"></a>filebeat.inputs:
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#01_installation_one_node-__codelineno-24-4"></a>- type: log   #Hier wird ein Typ angegeben
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#01_installation_one_node-__codelineno-24-5"></a>  enabled: true
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#01_installation_one_node-__codelineno-24-6"></a>  paths:      #Hier werden die Pfade zu den Daten angeben
<a id="__codelineno-24-7" name="__codelineno-24-7" href="#01_installation_one_node-__codelineno-24-7"></a>    - /var/log/*.log
<a id="__codelineno-24-8" name="__codelineno-24-8" href="#01_installation_one_node-__codelineno-24-8"></a>
<a id="__codelineno-24-9" name="__codelineno-24-9" href="#01_installation_one_node-__codelineno-24-9"></a>#--------------------Logstash Output--------------------
<a id="__codelineno-24-10" name="__codelineno-24-10" href="#01_installation_one_node-__codelineno-24-10"></a>output.logstash
<a id="__codelineno-24-11" name="__codelineno-24-11" href="#01_installation_one_node-__codelineno-24-11"></a>  hosts: [&quot;localhost:5044&quot;]
</code></pre></div></p>
<p>Möchte man Module nutzen, müssen diese per <code>filebeat module enable MODULNAME</code> angeschaltet werden. Die Module liegen unter <em>/etc/filebeat/modules</em>. Das Kommando benennt die Datei von <em>MODULNAME-disabled.yml</em> in <em>MODULNAME.yml</em></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#01_installation_one_node-__codelineno-25-1"></a>/usr/share/filebeat/bin/filebeat -e -c /etc/filebeat/filebeat.yml -d &quot;publish&quot;
</code></pre></div></section></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; Computacenter 2024
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "/", "features": ["content.code.annotate", "content.code.copy", "navigation.indexes", "navigation.instant", "navigation.sections", "navigation.top", "search.highlight", "search.suggest"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.8fd75fb4.min.js"></script>
      
        <script src="../js/print-site.js"></script>
      
        <script src="../assets/javascripts/extra/refresh-on-toggle-dark-light.js"></script>
      
        <script src="https://unpkg.com/tablesort@5.3.0/dist/tablesort.min.js"></script>
      
        <script src="../assets/javascripts/extra/tablesort.js"></script>
      
        <script src="https://unpkg.com/mermaid@10.7.0/dist/mermaid.min.js"></script>
      
    
  </body>
</html>