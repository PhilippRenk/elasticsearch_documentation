
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Elasticsearch Documentation">
      
      
      
      
      
      
      <link rel="icon" href="../assets/images/computacenter-logo.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.8">
    
    
      
        <title>Elasticsearch Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.f2e4d321.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      
  
  
    
    
  
    
    
  
  
  <style>:root{--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.25 12a.75.75 0 0 1-.22.53l-2.75 2.75a.75.75 0 0 1-1.06-1.06L7.44 12 5.22 9.78a.75.75 0 1 1 1.06-1.06l2.75 2.75c.141.14.22.331.22.53Zm2 2a.75.75 0 0 0 0 1.5h5a.75.75 0 0 0 0-1.5h-5Z"/><path d="M0 4.75C0 3.784.784 3 1.75 3h20.5c.966 0 1.75.784 1.75 1.75v14.5A1.75 1.75 0 0 1 22.25 21H1.75A1.75 1.75 0 0 1 0 19.25Zm1.75-.25a.25.25 0 0 0-.25.25v14.5c0 .138.112.25.25.25h20.5a.25.25 0 0 0 .25-.25V4.75a.25.25 0 0 0-.25-.25Z"/></svg>');--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 3a2 2 0 0 1 2-2h9.982a2 2 0 0 1 1.414.586l4.018 4.018A2 2 0 0 1 21 7.018V21a2 2 0 0 1-2 2H4.75a.75.75 0 0 1 0-1.5H19a.5.5 0 0 0 .5-.5V8.5h-4a2 2 0 0 1-2-2v-4H5a.5.5 0 0 0-.5.5v6.25a.75.75 0 0 1-1.5 0Zm12-.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 0-.146-.336l-4.018-4.018A.5.5 0 0 0 15 2.5Z"/><path d="M4.53 12.24a.75.75 0 0 1-.039 1.06l-2.639 2.45 2.64 2.45a.75.75 0 1 1-1.022 1.1l-3.23-3a.75.75 0 0 1 0-1.1l3.23-3a.75.75 0 0 1 1.06.04Zm3.979 1.06a.75.75 0 1 1 1.02-1.1l3.231 3a.75.75 0 0 1 0 1.1l-3.23 3a.75.75 0 1 1-1.021-1.1l2.639-2.45-2.64-2.45Z"/></svg>');}</style>



    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/print-site-enum-headings1.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings2.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings3.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings4.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings5.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings6.css">
    
      <link rel="stylesheet" href="../css/print-site.css">
    
      <link rel="stylesheet" href="../css/print-site-material.css">
    
      <link rel="stylesheet" href="../assets/stylesheets/extra.css">
    
      <link rel="stylesheet" href="../assets/stylesheets/tables.css">
    
    <script>__md_scope=new URL("/",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  
        <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', function () {
            remove_material_navigation();remove_mkdocs_theme_navigation();generate_toc();
        })
        </script>
        </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Elasticsearch Documentation" class="md-header__button md-logo" aria-label="Elasticsearch Documentation" data-md-component="logo">
      
  <img src="../assets/images/computacenter-logo-white.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Elasticsearch Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/PhilippRenk/elasticsearch_documentation" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    PhilippRenk/elasticsearch_documentation
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Elasticsearch Documentation" class="md-nav__button md-logo" aria-label="Elasticsearch Documentation" data-md-component="logo">
      
  <img src="../assets/images/computacenter-logo-white.png" alt="logo">

    </a>
    Elasticsearch Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/PhilippRenk/elasticsearch_documentation" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    PhilippRenk/elasticsearch_documentation
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Willkommen auf der Elasticsearch Dokumentation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Installation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Installation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Installation/00_useful%20commands/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Useful commands
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Installation/01_1_installation_elasticsearch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation Elasticsearch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Installation/01_2_Installation_kibana/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation Kibana
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Installation/01_3_installation_logstash/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Install Logstash
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Installation/01_4_installation_beats/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Install Filebeat
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Installation/02_1_Installation_three_node_cluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation Elasticsearch - Three Node CLuster
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Installation/test/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Foldable section
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#" class="md-nav__link">
    <span class="md-ellipsis">
      1. Willkommen auf der Elasticsearch Dokumentation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-installation" class="md-nav__link">
    <span class="md-ellipsis">
      I. Installation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="I. Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation-00_useful%20commands" class="md-nav__link">
    <span class="md-ellipsis">
      2. Useful commands
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installation-01_1_installation_elasticsearch" class="md-nav__link">
    <span class="md-ellipsis">
      3. Installation Elasticsearch
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installation-01_2_installation_kibana" class="md-nav__link">
    <span class="md-ellipsis">
      4. Installation Kibana
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installation-01_3_installation_logstash" class="md-nav__link">
    <span class="md-ellipsis">
      5. Install Logstash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installation-01_4_installation_beats" class="md-nav__link">
    <span class="md-ellipsis">
      6. Install Filebeat
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installation-02_1_installation_three_node_cluster" class="md-nav__link">
    <span class="md-ellipsis">
      7. Installation Elasticsearch - Three Node CLuster
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installation-test" class="md-nav__link">
    <span class="md-ellipsis">
      8. Foldable section
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<div id="print-site-page" class="print-site-enumerate-headings print-site-enumerate-figures">
        <section id="print-site-cover-page">
            <div>

    
        <h1>Elasticsearch Documentation</h1>
    

</div>

<p>
    <img src="../assets/images/computacenter.png" width=500/>
</p>


<p>
    Elasticsearch Documentation
</p>



<p>
    <em>Copyright &copy; Computacenter 2024</em>
</p>

        </section>
        
        <div id="print-site-banner">
            <p>
    <b><em>This box will disappear when printing!</em></b>
</p>
<p>This page has combined all site pages into one. This cover page and a table of contents will be added.</p>
<p>You can export to PDF using <b>File > Print > Save as PDF</b> (or use <b>Ctrl-P</b> and set to <b>Save as PDF</b>).</p>
<p>See also <a href="https://timvink.github.io/mkdocs-print-site-plugin/how-to/export-PDF.html">Export to PDF</a>.</p>
        </div>
        
        <section class="print-page">
            <div id="print-page-toc" data-toc-depth="3">
                <nav role='navigation' class='print-page-toc-nav'>
                <h1 class='print-page-toc-title'>Table of Contents</h1>
                </nav>
            </div>
        </section>
        <section class="print-page" id="index"><h1 id="index-willkommen-auf-der-elasticsearch-dokumentation">Willkommen auf der Elasticsearch Dokumentation</h1>
<p>Dieses Dokument/Seite soll Informationen für das Arbeiten mit Elasticsearch bereitstellen. 
Es sollen Anleitungen, Use Cases, Erklärungen und Best Practices gesammelt werden. </p>
<p>Diese Seite wird laufend aktualisiert.</p></section>
                        <h1 class='nav-section-title' id='section-installation'>
                            Installation <a class='headerlink' href='#section-installation' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="installation-00_useful%20commands"><h1 id="installation-00_useful%20commands-useful-commands">Useful commands</h1>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M4 1.75C4 .784 4.784 0 5.75 0h5.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v8.586A1.75 1.75 0 0 1 14.25 15h-9a.75.75 0 0 1 0-1.5h9a.25.25 0 0 0 .25-.25V6h-2.75A1.75 1.75 0 0 1 10 4.25V1.5H5.75a.25.25 0 0 0-.25.25v2.5a.75.75 0 0 1-1.5 0Zm1.72 4.97a.75.75 0 0 1 1.06 0l2 2a.75.75 0 0 1 0 1.06l-2 2a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734l1.47-1.47-1.47-1.47a.75.75 0 0 1 0-1.06ZM3.28 7.78 1.81 9.25l1.47 1.47a.751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018l-2-2a.75.75 0 0 1 0-1.06l2-2a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042Zm8.22-6.218V4.25c0 .138.112.25.25.25h2.688l-.011-.013-2.914-2.914-.013-.011Z"/></svg></span></p>
<h2 id="installation-00_useful%20commands-systemctl"><code>systemctl</code></h2>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="installation-00_useful%20commands-__tabbed_1_1" name="installation-00_useful%20commands-__tabbed_1" type="radio" /><input id="installation-00_useful%20commands-__tabbed_1_2" name="installation-00_useful%20commands-__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="installation-00_useful%20commands-__tabbed_1_1">restart elastic</label><label for="installation-00_useful%20commands-__tabbed_1_2">status elastic</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#installation-00_useful%20commands-__codelineno-0-1"></a>systemctl<span class="w"> </span>restart<span class="w"> </span>elasticsearch.service
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#installation-00_useful%20commands-__codelineno-1-1"></a>systemctl<span class="w"> </span>status<span class="w"> </span>elasticsearch.service
</code></pre></div>
</div>
</div>
</div>
<h2 id="installation-00_useful%20commands-journalctl"><code>journalctl</code></h2>
<div class="tabbed-set tabbed-alternate" data-tabs="2:1"><input checked="checked" id="installation-00_useful%20commands-__tabbed_2_1" name="installation-00_useful%20commands-__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="installation-00_useful%20commands-__tabbed_2_1">elastic logs</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#installation-00_useful%20commands-__codelineno-2-1"></a>journalctl<span class="w"> </span>-u<span class="w"> </span>elasticsearch.service
</code></pre></div>
</div>
</div>
</div>
<h2 id="installation-00_useful%20commands-curl"><code>curl</code></h2>
<div class="tabbed-set tabbed-alternate" data-tabs="3:1"><input checked="checked" id="installation-00_useful%20commands-__tabbed_3_1" name="installation-00_useful%20commands-__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="installation-00_useful%20commands-__tabbed_3_1">elastic with login</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#installation-00_useful%20commands-__codelineno-3-1"></a>curl<span class="w"> </span>--cacert<span class="w"> </span>config/certs/http_ca.crt<span class="w"> </span>-u<span class="w"> </span>elastic:<span class="nv">$ELASTIC_PASSWORD</span><span class="w"> </span>https://localhost:9200
</code></pre></div>
</div>
</div>
</div>
<h1 id="installation-00_useful%20commands-certificates">Certificates</h1>
<p>The Fingerprint of the http certificate can be obtained with the command:
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#installation-00_useful%20commands-__codelineno-4-1"></a>openssl<span class="w"> </span>x509<span class="w"> </span>-fingerprint<span class="w"> </span>-sha256<span class="w"> </span>-in<span class="w"> </span>/etc/elasticsearch/certshttp_ca.crt
</code></pre></div></p>
<p>The password for the http.p12 keystore can be obtained with:
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#installation-00_useful%20commands-__codelineno-5-1"></a>/usr/share/elasticsearch/bin/elasticsearch-keystore<span class="w"> </span>show<span class="w"> </span>xpack.security.http.ssl.keystore.secure_password
</code></pre></div></p>
<p>for the transport.p12:
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#installation-00_useful%20commands-__codelineno-6-1"></a>/usr/share/elasticsearch/bin/elasticsearch-keystore<span class="w"> </span>show<span class="w"> </span>xpack.security.transport.ssl.keystore.secure_password
</code></pre></div></p>
<h1 id="installation-00_useful%20commands-nmcli">nmcli</h1>
<h2 id="installation-00_useful%20commands-device-information">Device information</h2>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="installation-00_useful%20commands-__tabbed_4_1" name="installation-00_useful%20commands-__tabbed_4" type="radio" /><input id="installation-00_useful%20commands-__tabbed_4_2" name="installation-00_useful%20commands-__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="installation-00_useful%20commands-__tabbed_4_1">show device</label><label for="installation-00_useful%20commands-__tabbed_4_2">show device (pretty)</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#installation-00_useful%20commands-__codelineno-7-1"></a>nmcli<span class="w"> </span>device<span class="w"> </span>show
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#installation-00_useful%20commands-__codelineno-8-1"></a>nmcli<span class="w"> </span>-p<span class="w"> </span>device<span class="w"> </span>show
</code></pre></div>
</div>
</div>
</div>
<h2 id="installation-00_useful%20commands-individual-changes">Individual changes</h2>
<div class="tabbed-set tabbed-alternate" data-tabs="5:4"><input checked="checked" id="installation-00_useful%20commands-__tabbed_5_1" name="installation-00_useful%20commands-__tabbed_5" type="radio" /><input id="installation-00_useful%20commands-__tabbed_5_2" name="installation-00_useful%20commands-__tabbed_5" type="radio" /><input id="installation-00_useful%20commands-__tabbed_5_3" name="installation-00_useful%20commands-__tabbed_5" type="radio" /><input id="installation-00_useful%20commands-__tabbed_5_4" name="installation-00_useful%20commands-__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="installation-00_useful%20commands-__tabbed_5_1">change ip</label><label for="installation-00_useful%20commands-__tabbed_5_2">change gateway</label><label for="installation-00_useful%20commands-__tabbed_5_3">change dns</label><label for="installation-00_useful%20commands-__tabbed_5_4">change DHCP to static</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#installation-00_useful%20commands-__codelineno-9-1"></a>nmcli<span class="w"> </span>con<span class="w"> </span>mod<span class="w"> </span>enps03<span class="w"> </span>ipv4.addresses<span class="w"> </span><span class="s2">&quot;192.168.2.20/24&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#installation-00_useful%20commands-__codelineno-10-1"></a>nmcli<span class="w"> </span>con<span class="w"> </span>mod<span class="w"> </span>enps03<span class="w"> </span>ipv4.gateway<span class="w"> </span><span class="s2">&quot;192.168.2.1&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#installation-00_useful%20commands-__codelineno-11-1"></a>nmcli<span class="w"> </span>con<span class="w"> </span>mod<span class="w"> </span>enps03<span class="w"> </span>ipv4.dns<span class="w"> </span><span class="s2">&quot;8.8.8.8&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#installation-00_useful%20commands-__codelineno-12-1"></a>nmcli<span class="w"> </span>con<span class="w"> </span>mod<span class="w"> </span>enps03<span class="w"> </span>ipv4.method<span class="w"> </span>manual
</code></pre></div>
</div>
</div>
</div>
<p><strong>commit changes</strong></p>
<details class="info inline end">
<summary>Info</summary>
<p>config is written to <code>/etc/sysconfig/network-scripts/ifcfg-enps03</code></p>
</details>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#installation-00_useful%20commands-__codelineno-13-1"></a>nmcli<span class="w"> </span>con<span class="w"> </span>up<span class="w"> </span>enps03
</code></pre></div>
<h2 id="installation-00_useful%20commands-nmcli-shell-script">nmcli shell script</h2>
<details><summary>shell script to update network connection</summary>

<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#installation-00_useful%20commands-__codelineno-14-1"></a><span class="ch">#!/bin/bash</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#installation-00_useful%20commands-__codelineno-14-2"></a>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#installation-00_useful%20commands-__codelineno-14-3"></a><span class="c1"># Replace these values with your actual IP address, DNS, and connection method</span>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#installation-00_useful%20commands-__codelineno-14-4"></a><span class="c1">#!/bin/bash</span>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#installation-00_useful%20commands-__codelineno-14-5"></a>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#installation-00_useful%20commands-__codelineno-14-6"></a><span class="c1"># Set your variables</span>
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#installation-00_useful%20commands-__codelineno-14-7"></a><span class="nv">connection_name</span><span class="o">=</span><span class="s2">&quot;YourConnectionName&quot;</span>
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#installation-00_useful%20commands-__codelineno-14-8"></a><span class="nv">new_ip_address</span><span class="o">=</span><span class="s2">&quot;192.168.1.2&quot;</span>
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#installation-00_useful%20commands-__codelineno-14-9"></a><span class="nv">new_dns</span><span class="o">=</span><span class="s2">&quot;8.8.8.8&quot;</span>
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#installation-00_useful%20commands-__codelineno-14-10"></a><span class="nv">new_method</span><span class="o">=</span><span class="s2">&quot;manual&quot;</span>
<a id="__codelineno-14-11" name="__codelineno-14-11" href="#installation-00_useful%20commands-__codelineno-14-11"></a>
<a id="__codelineno-14-12" name="__codelineno-14-12" href="#installation-00_useful%20commands-__codelineno-14-12"></a><span class="c1"># Check if NetworkManager is installed</span>
<a id="__codelineno-14-13" name="__codelineno-14-13" href="#installation-00_useful%20commands-__codelineno-14-13"></a><span class="k">if</span><span class="w"> </span>!<span class="w"> </span><span class="nb">command</span><span class="w"> </span>-v<span class="w"> </span>nmcli<span class="w"> </span><span class="p">&amp;</span>&gt;<span class="w"> </span>/dev/null<span class="p">;</span><span class="w"> </span><span class="k">then</span>
<a id="__codelineno-14-14" name="__codelineno-14-14" href="#installation-00_useful%20commands-__codelineno-14-14"></a><span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;NetworkManager (nmcli) not found. Please install it.&quot;</span>
<a id="__codelineno-14-15" name="__codelineno-14-15" href="#installation-00_useful%20commands-__codelineno-14-15"></a><span class="w">    </span><span class="nb">exit</span><span class="w"> </span><span class="m">1</span>
<a id="__codelineno-14-16" name="__codelineno-14-16" href="#installation-00_useful%20commands-__codelineno-14-16"></a><span class="k">fi</span>
<a id="__codelineno-14-17" name="__codelineno-14-17" href="#installation-00_useful%20commands-__codelineno-14-17"></a>
<a id="__codelineno-14-18" name="__codelineno-14-18" href="#installation-00_useful%20commands-__codelineno-14-18"></a><span class="c1"># Check if the connection exists</span>
<a id="__codelineno-14-19" name="__codelineno-14-19" href="#installation-00_useful%20commands-__codelineno-14-19"></a><span class="k">if</span><span class="w"> </span>!<span class="w"> </span>nmcli<span class="w"> </span>connection<span class="w"> </span>show<span class="w"> </span>--active<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-q<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$connection_name</span><span class="s2">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<a id="__codelineno-14-20" name="__codelineno-14-20" href="#installation-00_useful%20commands-__codelineno-14-20"></a><span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Connection &#39;</span><span class="nv">$connection_name</span><span class="s2">&#39; not found or not active.&quot;</span>
<a id="__codelineno-14-21" name="__codelineno-14-21" href="#installation-00_useful%20commands-__codelineno-14-21"></a><span class="w">    </span><span class="nb">exit</span><span class="w"> </span><span class="m">1</span>
<a id="__codelineno-14-22" name="__codelineno-14-22" href="#installation-00_useful%20commands-__codelineno-14-22"></a><span class="k">fi</span>
<a id="__codelineno-14-23" name="__codelineno-14-23" href="#installation-00_useful%20commands-__codelineno-14-23"></a>
<a id="__codelineno-14-24" name="__codelineno-14-24" href="#installation-00_useful%20commands-__codelineno-14-24"></a><span class="c1"># Update the connection settings</span>
<a id="__codelineno-14-25" name="__codelineno-14-25" href="#installation-00_useful%20commands-__codelineno-14-25"></a>nmcli<span class="w"> </span>connection<span class="w"> </span>modify<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$connection_name</span><span class="s2">&quot;</span><span class="w"> </span>ipv4.address<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$new_ip_address</span><span class="s2">&quot;</span><span class="w"> </span>
<a id="__codelineno-14-26" name="__codelineno-14-26" href="#installation-00_useful%20commands-__codelineno-14-26"></a>nmcli<span class="w"> </span>connection<span class="w"> </span>modify<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$connection_name</span><span class="s2">&quot;</span><span class="w"> </span>ipv4.dns<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$new_dns</span><span class="s2">&quot;</span><span class="w"> </span>
<a id="__codelineno-14-27" name="__codelineno-14-27" href="#installation-00_useful%20commands-__codelineno-14-27"></a>nmcli<span class="w"> </span>connection<span class="w"> </span>modify<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$connection_name</span><span class="s2">&quot;</span><span class="w"> </span>ipv4.method<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$new_method</span><span class="s2">&quot;</span>
<a id="__codelineno-14-28" name="__codelineno-14-28" href="#installation-00_useful%20commands-__codelineno-14-28"></a>
<a id="__codelineno-14-29" name="__codelineno-14-29" href="#installation-00_useful%20commands-__codelineno-14-29"></a><span class="c1"># Restart the connection for changes to take effect</span>
<a id="__codelineno-14-30" name="__codelineno-14-30" href="#installation-00_useful%20commands-__codelineno-14-30"></a>nmcli<span class="w"> </span>connection<span class="w"> </span>down<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$connection_name</span><span class="s2">&quot;</span>
<a id="__codelineno-14-31" name="__codelineno-14-31" href="#installation-00_useful%20commands-__codelineno-14-31"></a>nmcli<span class="w"> </span>connection<span class="w"> </span>up<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$connection_name</span><span class="s2">&quot;</span>
<a id="__codelineno-14-32" name="__codelineno-14-32" href="#installation-00_useful%20commands-__codelineno-14-32"></a>
<a id="__codelineno-14-33" name="__codelineno-14-33" href="#installation-00_useful%20commands-__codelineno-14-33"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Connection &#39;</span><span class="nv">$connection_name</span><span class="s2">&#39; updated successfully.&quot;</span>
</code></pre></div>
</details></section><section class="print-page" id="installation-01_1_installation_elasticsearch"><h1 id="installation-01_1_installation_elasticsearch-installation-elasticsearch">Installation Elasticsearch</h1>
<table>
<thead>
<tr>
<th>Komponente</th>
<th>Name</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>Link</em></td>
<td>https://www.elastic.co/guide/en/elasticsearch/reference/current/rpm.html</td>
</tr>
<tr>
<td><em>OS:</em></td>
<td>Centos Stream 9</td>
</tr>
<tr>
<td>Virtualisierung:</td>
<td>vSphere</td>
</tr>
<tr>
<td>Server A:</td>
<td>Elasticsearch, Kibana</td>
</tr>
<tr>
<td>Server B:</td>
<td>Logstash, Filebeat, Python Scripts</td>
</tr>
<tr>
<td>Voraussetzung:</td>
<td>JAVA JDK Version</td>
</tr>
</tbody>
</table>
<h2 id="installation-01_1_installation_elasticsearch-download">Download</h2>
<p>For <code>yum</code> or <code>dnf</code> create <code>elasticsearch.repo</code> file and include the repo information.</p>
<div class="highlight"><span class="filename">repo filepath</span><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#installation-01_1_installation_elasticsearch-__codelineno-0-1"></a>vim<span class="w"> </span>/etc/yum.repos.d/elasticsearch.repo
</code></pre></div>
<div class="admonition abstract">
<p class="admonition-title"><code>elasticsearch.repo</code></p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#installation-01_1_installation_elasticsearch-__codelineno-1-1"></a>[elasticsearch]
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#installation-01_1_installation_elasticsearch-__codelineno-1-2"></a>name=Elastic repository for 8.x packages
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#installation-01_1_installation_elasticsearch-__codelineno-1-3"></a>baseurl=https://artifacts.elastic.co/packages/8.x/yum
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#installation-01_1_installation_elasticsearch-__codelineno-1-4"></a>gpgcheck=1
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#installation-01_1_installation_elasticsearch-__codelineno-1-5"></a>gpgkey=https://artifacts.elastic.co/GPG-KEY-elasticsearch
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#installation-01_1_installation_elasticsearch-__codelineno-1-6"></a>enabled=1
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#installation-01_1_installation_elasticsearch-__codelineno-1-7"></a>autorefresh=1
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#installation-01_1_installation_elasticsearch-__codelineno-1-8"></a>type=rpm-md
</code></pre></div>
<span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11 9h2V7h-2m1 13c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-18A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2m-1 15h2v-6h-2v6Z"/></svg></span> Repo sollte für alle drei Komponenten ausreichen (Elastic, Filebeat, Kibana)</p>
</div>
<h2 id="installation-01_1_installation_elasticsearch-installation">Installation</h2>
<p>Auf der Kommandozeile folgende Befehle absetzen:</p>
<h3 id="installation-01_1_installation_elasticsearch-dnf">dnf</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="installation-01_1_installation_elasticsearch-__tabbed_1_1" name="installation-01_1_installation_elasticsearch-__tabbed_1" type="radio" /><input id="installation-01_1_installation_elasticsearch-__tabbed_1_2" name="installation-01_1_installation_elasticsearch-__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="installation-01_1_installation_elasticsearch-__tabbed_1_1">crypto policy <span class="twemoji" title="Only required for RHEL9"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11 9h2V7h-2m1 13c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-18A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2m-1 15h2v-6h-2v6Z"/></svg></span></label><label for="installation-01_1_installation_elasticsearch-__tabbed_1_2">install</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#installation-01_1_installation_elasticsearch-__codelineno-2-1"></a>update-crypto-policies<span class="w"> </span>--set<span class="w"> </span>DEFAULT:SHA1
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#installation-01_1_installation_elasticsearch-__codelineno-3-1"></a>dnf<span class="w"> </span>install<span class="w"> </span>--enablerepo<span class="o">=</span>elasticsearch<span class="w"> </span>elasticsearch
</code></pre></div>
</div>
</div>
</div>
<h3 id="installation-01_1_installation_elasticsearch-systemctl">systemctl</h3>
<p>Start the elasticsearch server with systemctl, enable it on startup.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:3"><input checked="checked" id="installation-01_1_installation_elasticsearch-__tabbed_2_1" name="installation-01_1_installation_elasticsearch-__tabbed_2" type="radio" /><input id="installation-01_1_installation_elasticsearch-__tabbed_2_2" name="installation-01_1_installation_elasticsearch-__tabbed_2" type="radio" /><input id="installation-01_1_installation_elasticsearch-__tabbed_2_3" name="installation-01_1_installation_elasticsearch-__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="installation-01_1_installation_elasticsearch-__tabbed_2_1">reload</label><label for="installation-01_1_installation_elasticsearch-__tabbed_2_2">enable</label><label for="installation-01_1_installation_elasticsearch-__tabbed_2_3">start</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#installation-01_1_installation_elasticsearch-__codelineno-4-1"></a>systemctl<span class="w"> </span>daemon-reload
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#installation-01_1_installation_elasticsearch-__codelineno-5-1"></a>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>elasticsearch
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#installation-01_1_installation_elasticsearch-__codelineno-6-1"></a>systemctl<span class="w"> </span>start<span class="w"> </span>elasticsearch
</code></pre></div>
</div>
</div>
</div>
<hr />
<h3 id="installation-01_1_installation_elasticsearch-firewall-cmd">firewall-cmd</h3>
<p>Enable the connection to the elasticsearch-server by adding a port to the firewall <em>(standard: <code>9200</code>)</em>.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="installation-01_1_installation_elasticsearch-__tabbed_3_1" name="installation-01_1_installation_elasticsearch-__tabbed_3" type="radio" /><input id="installation-01_1_installation_elasticsearch-__tabbed_3_2" name="installation-01_1_installation_elasticsearch-__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="installation-01_1_installation_elasticsearch-__tabbed_3_1">add-port</label><label for="installation-01_1_installation_elasticsearch-__tabbed_3_2">reload</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#installation-01_1_installation_elasticsearch-__codelineno-7-1"></a>firewall-cmd --add-port=9200/tcp --permanent
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#installation-01_1_installation_elasticsearch-__codelineno-8-1"></a>firewall-cmd --reload
</code></pre></div>
</div>
</div>
</div>
<hr />
<details class="warning" open="open">
<summary>Password output on installation</summary>
<p>Elastic password for superuser is generated during installation and written to STDOUT</p>
</details>
<details class="info">
<summary>Lesson learned</summary>
<p>Entweder über eine .repo Datei oder über ein wget die Installation ermöglichen</p>
</details>
<h2 id="installation-01_1_installation_elasticsearch-configuration">Configuration</h2>
<p><div class="highlight"><span class="filename">config path</span><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#installation-01_1_installation_elasticsearch-__codelineno-9-1"></a>vim<span class="w"> </span>/etc/elasticsearch/elasticsearch.yml
</code></pre></div>
Configure the following elements:</p>
<ul>
<li><strong>node.name</strong>: The name which is displayed for this server at the cluster</li>
<li><strong>network.host</strong>: Define the IP under which the server is found</li>
<li><strong>http.port</strong>: Standard Port is 9200 </li>
</ul>
<details class="abstract">
<summary><code>elasticsearch.yml</code></summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#installation-01_1_installation_elasticsearch-__codelineno-10-1"></a><span class="c1">#-------------------------------Node------------------</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#installation-01_1_installation_elasticsearch-__codelineno-10-2"></a><span class="hll"><span class="nt">node.name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">localhost</span>
</span><a id="__codelineno-10-3" name="__codelineno-10-3" href="#installation-01_1_installation_elasticsearch-__codelineno-10-3"></a>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#installation-01_1_installation_elasticsearch-__codelineno-10-4"></a>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#installation-01_1_installation_elasticsearch-__codelineno-10-5"></a><span class="c1"># Set the bind address to a specific IP (IPv4 or IPv6): </span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#installation-01_1_installation_elasticsearch-__codelineno-10-6"></a><span class="hll"><span class="w">    </span><span class="nt">network.host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">localhost</span><span class="w"> </span>
</span><a id="__codelineno-10-7" name="__codelineno-10-7" href="#installation-01_1_installation_elasticsearch-__codelineno-10-7"></a><span class="c1">#</span>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#installation-01_1_installation_elasticsearch-__codelineno-10-8"></a><span class="c1"># Set a custom port for HTTP: </span>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#installation-01_1_installation_elasticsearch-__codelineno-10-9"></a><span class="hll"><span class="w">    </span><span class="nt">http.port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">9200</span><span class="w">  </span>
</span><a id="__codelineno-10-10" name="__codelineno-10-10" href="#installation-01_1_installation_elasticsearch-__codelineno-10-10"></a><span class="c1"># elasticsearch.host: [&quot;http://localhost:9200&quot;]</span>
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#installation-01_1_installation_elasticsearch-__codelineno-10-11"></a>
<a id="__codelineno-10-12" name="__codelineno-10-12" href="#installation-01_1_installation_elasticsearch-__codelineno-10-12"></a><span class="c1">#----------------------- BEGIN SECURITY AUTO CONFIGURATION -----------------------</span>
<a id="__codelineno-10-13" name="__codelineno-10-13" href="#installation-01_1_installation_elasticsearch-__codelineno-10-13"></a><span class="c1">#</span>
<a id="__codelineno-10-14" name="__codelineno-10-14" href="#installation-01_1_installation_elasticsearch-__codelineno-10-14"></a><span class="c1"># The following settings, TLS certificates, and keys have been automatically      </span>
<a id="__codelineno-10-15" name="__codelineno-10-15" href="#installation-01_1_installation_elasticsearch-__codelineno-10-15"></a><span class="c1"># generated to configure Elasticsearch security features on 28-08-2023 14:32:16</span>
<a id="__codelineno-10-16" name="__codelineno-10-16" href="#installation-01_1_installation_elasticsearch-__codelineno-10-16"></a><span class="c1">#</span>
<a id="__codelineno-10-17" name="__codelineno-10-17" href="#installation-01_1_installation_elasticsearch-__codelineno-10-17"></a><span class="c1"># --------------------------------------------------------------------------------</span>
<a id="__codelineno-10-18" name="__codelineno-10-18" href="#installation-01_1_installation_elasticsearch-__codelineno-10-18"></a>
<a id="__codelineno-10-19" name="__codelineno-10-19" href="#installation-01_1_installation_elasticsearch-__codelineno-10-19"></a><span class="c1"># Enable security features</span>
<a id="__codelineno-10-20" name="__codelineno-10-20" href="#installation-01_1_installation_elasticsearch-__codelineno-10-20"></a>
<a id="__codelineno-10-21" name="__codelineno-10-21" href="#installation-01_1_installation_elasticsearch-__codelineno-10-21"></a><span class="nt">xpack.security.enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-10-22" name="__codelineno-10-22" href="#installation-01_1_installation_elasticsearch-__codelineno-10-22"></a><span class="nt">xpack.security.enrollment.enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-10-23" name="__codelineno-10-23" href="#installation-01_1_installation_elasticsearch-__codelineno-10-23"></a>
<a id="__codelineno-10-24" name="__codelineno-10-24" href="#installation-01_1_installation_elasticsearch-__codelineno-10-24"></a><span class="c1"># Enable encryption for HTTP API client connections, such as Kibana, Logstash, and Agents</span>
<a id="__codelineno-10-25" name="__codelineno-10-25" href="#installation-01_1_installation_elasticsearch-__codelineno-10-25"></a><span class="nt">xpack.security.http.ssl</span><span class="p">:</span>
<a id="__codelineno-10-26" name="__codelineno-10-26" href="#installation-01_1_installation_elasticsearch-__codelineno-10-26"></a><span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-10-27" name="__codelineno-10-27" href="#installation-01_1_installation_elasticsearch-__codelineno-10-27"></a><span class="hll"><span class="w">    </span><span class="nt">keystore.path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/elasticsearch/certs/http.p12</span>
</span><a id="__codelineno-10-28" name="__codelineno-10-28" href="#installation-01_1_installation_elasticsearch-__codelineno-10-28"></a>
<a id="__codelineno-10-29" name="__codelineno-10-29" href="#installation-01_1_installation_elasticsearch-__codelineno-10-29"></a><span class="c1"># Enable encryption and mutual authentication between cluster nodes</span>
<a id="__codelineno-10-30" name="__codelineno-10-30" href="#installation-01_1_installation_elasticsearch-__codelineno-10-30"></a><span class="nt">xpack.security.transport.ssl</span><span class="p">:</span>
<a id="__codelineno-10-31" name="__codelineno-10-31" href="#installation-01_1_installation_elasticsearch-__codelineno-10-31"></a><span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-10-32" name="__codelineno-10-32" href="#installation-01_1_installation_elasticsearch-__codelineno-10-32"></a><span class="w">    </span><span class="nt">verification_mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">certificate</span>
<a id="__codelineno-10-33" name="__codelineno-10-33" href="#installation-01_1_installation_elasticsearch-__codelineno-10-33"></a><span class="hll"><span class="w">    </span><span class="nt">keystore.path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/elasticsearch/certs/transport.p12</span>
</span><a id="__codelineno-10-34" name="__codelineno-10-34" href="#installation-01_1_installation_elasticsearch-__codelineno-10-34"></a><span class="hll"><span class="w">    </span><span class="nt">truststore.path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/elasticsearch/certs/certs/transport.p12</span>
</span><a id="__codelineno-10-35" name="__codelineno-10-35" href="#installation-01_1_installation_elasticsearch-__codelineno-10-35"></a><span class="c1"># Create a new cluster with the current node only</span>
<a id="__codelineno-10-36" name="__codelineno-10-36" href="#installation-01_1_installation_elasticsearch-__codelineno-10-36"></a><span class="c1"># Additional nodes can still join the cluster later</span>
<a id="__codelineno-10-37" name="__codelineno-10-37" href="#installation-01_1_installation_elasticsearch-__codelineno-10-37"></a><span class="nt">cluster.initial_master_nodes</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;localhost.localdomain&quot;</span><span class="p p-Indicator">]</span>
</code></pre></div>
</details>
<h2 id="installation-01_1_installation_elasticsearch-security">Security</h2>
<p>Das bei der Installation erschaffenene Zertifikat muss noch per <code>scp</code> an den Server B (auf dem Logstash installiert wird) kopiert werden und in dem Ordner hinterlegt werden, der in der <code>logstash.yml</code> angegeben ist. </p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:5"><input checked="checked" id="installation-01_1_installation_elasticsearch-__tabbed_4_1" name="installation-01_1_installation_elasticsearch-__tabbed_4" type="radio" /><input id="installation-01_1_installation_elasticsearch-__tabbed_4_2" name="installation-01_1_installation_elasticsearch-__tabbed_4" type="radio" /><input id="installation-01_1_installation_elasticsearch-__tabbed_4_3" name="installation-01_1_installation_elasticsearch-__tabbed_4" type="radio" /><input id="installation-01_1_installation_elasticsearch-__tabbed_4_4" name="installation-01_1_installation_elasticsearch-__tabbed_4" type="radio" /><input id="installation-01_1_installation_elasticsearch-__tabbed_4_5" name="installation-01_1_installation_elasticsearch-__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="installation-01_1_installation_elasticsearch-__tabbed_4_1">Create certificate</label><label for="installation-01_1_installation_elasticsearch-__tabbed_4_2">Reset password automatically:</label><label for="installation-01_1_installation_elasticsearch-__tabbed_4_3">show keystore password</label><label for="installation-01_1_installation_elasticsearch-__tabbed_4_4">create CA</label><label for="installation-01_1_installation_elasticsearch-__tabbed_4_5">create certificate</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#installation-01_1_installation_elasticsearch-__codelineno-11-1"></a><span class="c1"># Nur wenn unter /etc/elasticsearch/ noch nicht enthalten ist:</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#installation-01_1_installation_elasticsearch-__codelineno-11-2"></a>/usr/share/elasticsearch/bin/elasticsearch-keystore<span class="w"> </span>create
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#installation-01_1_installation_elasticsearch-__codelineno-12-1"></a>/usr/share/elasticsearch/bin/elasticsearch-keystore<span class="w"> </span>passwd
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#installation-01_1_installation_elasticsearch-__codelineno-13-1"></a>/usr/share/elasticsearch/bin/elasticsearch-keystore<span class="w"> </span>show<span class="w"> </span>xpack.security.http.ssl.keystore.secure_password
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#installation-01_1_installation_elasticsearch-__codelineno-14-1"></a>/usr/share/elasticsearch/bin/elasticsearch-certutil<span class="w"> </span>ca
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#installation-01_1_installation_elasticsearch-__codelineno-15-1"></a>/usr/share/elasticsearch/bin/elasticsearch-certutil<span class="w"> </span>cert<span class="w"> </span>--ca<span class="w"> </span>elastic-stack-ca.p12
</code></pre></div>
</div>
</div>
</div>
<details class="info" open="open">
<summary>Lesson learned</summary>
<p>In Elastic 8 oder neu wird SSL im Default aktiviert</p>
</details>
<p>Der Server muss dann rebootet werden.</p></section><section class="print-page" id="installation-01_2_installation_kibana"><h1 id="installation-01_2_installation_kibana-installation-kibana">Installation Kibana</h1>
<p>Remember to include repo on rpm - same as <a data-preview="data-preview" href="#installation-01_1_installation_elasticsearch-download">elastic installation</a></p>
<div class="highlight"><span class="filename">Install</span><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#installation-01_2_installation_kibana-__codelineno-0-1"></a>sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>kibana
</code></pre></div>
<h2 id="installation-01_2_installation_kibana-konfiguration">Konfiguration</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#installation-01_2_installation_kibana-__codelineno-1-1"></a>sudo<span class="w"> </span>vim<span class="w"> </span>/etc/kibana/kibana.yml
</code></pre></div>
<div class="highlight"><span class="filename">change following values</span><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#installation-01_2_installation_kibana-__codelineno-2-1"></a><span class="nt">server.port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5601</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#installation-01_2_installation_kibana-__codelineno-2-2"></a><span class="nt">server.host</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;localhost&quot;</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#installation-01_2_installation_kibana-__codelineno-2-3"></a><span class="nt">elasticsearch.hosts</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;https://localhost:9200&quot;</span><span class="p p-Indicator">]</span>
</code></pre></div>
<h3 id="installation-01_2_installation_kibana-systemctl">systemctl</h3>
<p>Start the kibana-server with systemctl, enable it on startup.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:3"><input checked="checked" id="installation-01_2_installation_kibana-__tabbed_1_1" name="installation-01_2_installation_kibana-__tabbed_1" type="radio" /><input id="installation-01_2_installation_kibana-__tabbed_1_2" name="installation-01_2_installation_kibana-__tabbed_1" type="radio" /><input id="installation-01_2_installation_kibana-__tabbed_1_3" name="installation-01_2_installation_kibana-__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="installation-01_2_installation_kibana-__tabbed_1_1">reload</label><label for="installation-01_2_installation_kibana-__tabbed_1_2">enable</label><label for="installation-01_2_installation_kibana-__tabbed_1_3">start</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#installation-01_2_installation_kibana-__codelineno-3-1"></a>systemctl<span class="w"> </span>daemon-reload
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#installation-01_2_installation_kibana-__codelineno-4-1"></a>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>kibana.service
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#installation-01_2_installation_kibana-__codelineno-5-1"></a>systemctl<span class="w"> </span>start<span class="w"> </span>kibana.service
</code></pre></div>
</div>
</div>
</div>
<hr />
<h3 id="installation-01_2_installation_kibana-firewall-cmd">firewall-cmd</h3>
<p>Enable the connection to the elasticsearch-server by adding a port to the firewall <em>(standard: <code>9200</code>)</em>.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="installation-01_2_installation_kibana-__tabbed_2_1" name="installation-01_2_installation_kibana-__tabbed_2" type="radio" /><input id="installation-01_2_installation_kibana-__tabbed_2_2" name="installation-01_2_installation_kibana-__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="installation-01_2_installation_kibana-__tabbed_2_1">add-port</label><label for="installation-01_2_installation_kibana-__tabbed_2_2">reload</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#installation-01_2_installation_kibana-__codelineno-6-1"></a>firewall-cmd --add-port=5601/tcp --permanent
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#installation-01_2_installation_kibana-__codelineno-7-1"></a>firewall-cmd --reload
</code></pre></div>
</div>
</div>
</div>
<hr />
<h2 id="installation-01_2_installation_kibana-enroll">Enroll</h2>
<p>To enroll kibana automatically generate an enrollment token on the elastic server. You have to utilize the <code>elasticsearch-create-enrollment-token</code> binary. </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#installation-01_2_installation_kibana-__codelineno-8-1"></a>/usr/share/elasticsearch/bin/elasticsearch-create-enrollment-token<span class="w"> </span>--scope<span class="w"> </span>kibana
</code></pre></div>
<h3 id="installation-01_2_installation_kibana-browser">Browser</h3>
<p>Log into the server with a browser under port 5601 e.g. (http://localhost:5601) and pass the enrollment token. After that a verification code ist requestet. Generate it on the elastic Server with the <code>kibana-verification-code</code> binary.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#installation-01_2_installation_kibana-__codelineno-9-1"></a>/usr/share/kibana/bin/kibana-verification-code
</code></pre></div>
<h3 id="installation-01_2_installation_kibana-detatched">Detatched</h3>
<p>You can run a browser detatched enrollment with the <code>kibana-setup</code> binary.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#installation-01_2_installation_kibana-__codelineno-10-1"></a>/usr/share/kibana/bin/kibana-setup<span class="w"> </span>--enrollment-token
</code></pre></div></section><section class="print-page" id="installation-01_3_installation_logstash"><h1 id="installation-01_3_installation_logstash-install-logstash">Install Logstash</h1>
<h2 id="installation-01_3_installation_logstash-user-anlegen">User anlegen:</h2>
<p>In Kibana (auf Server A) muss unter Management -&gt; Dev Tools per API ein User <code>logstash_writer</code> und die Rolle <code>logstash_writer_role</code> erstellt werden.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#installation-01_3_installation_logstash-__codelineno-0-1"></a>POST /_security/role/logstash_write_role
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#installation-01_3_installation_logstash-__codelineno-0-2"></a>{
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#installation-01_3_installation_logstash-__codelineno-0-3"></a>    &quot;cluster&quot;: [
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#installation-01_3_installation_logstash-__codelineno-0-4"></a>      &quot;monitor&quot;,
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#installation-01_3_installation_logstash-__codelineno-0-5"></a>      &quot;manage_index_templates&quot;
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#installation-01_3_installation_logstash-__codelineno-0-6"></a>    ],
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#installation-01_3_installation_logstash-__codelineno-0-7"></a>    &quot;indices&quot;: [
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#installation-01_3_installation_logstash-__codelineno-0-8"></a>      {
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#installation-01_3_installation_logstash-__codelineno-0-9"></a>        &quot;names&quot;: [
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#installation-01_3_installation_logstash-__codelineno-0-10"></a>           &quot;filebeat*&quot;
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#installation-01_3_installation_logstash-__codelineno-0-11"></a>        ],
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#installation-01_3_installation_logstash-__codelineno-0-12"></a>        &quot;privileges&quot;: [
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#installation-01_3_installation_logstash-__codelineno-0-13"></a>          &quot;write&quot;,
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#installation-01_3_installation_logstash-__codelineno-0-14"></a>          &quot;create_index&quot;
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#installation-01_3_installation_logstash-__codelineno-0-15"></a>        ],
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#installation-01_3_installation_logstash-__codelineno-0-16"></a>        &quot;field_security&quot;: {
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#installation-01_3_installation_logstash-__codelineno-0-17"></a>          &quot;grant&quot;: [
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#installation-01_3_installation_logstash-__codelineno-0-18"></a>            &quot;*&quot;
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#installation-01_3_installation_logstash-__codelineno-0-19"></a>          ]
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#installation-01_3_installation_logstash-__codelineno-0-20"></a>        }
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#installation-01_3_installation_logstash-__codelineno-0-21"></a>      }
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#installation-01_3_installation_logstash-__codelineno-0-22"></a>    ],
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#installation-01_3_installation_logstash-__codelineno-0-23"></a>    &quot;run_as&quot;: [],
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#installation-01_3_installation_logstash-__codelineno-0-24"></a>    &quot;metadata&quot;: {},
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#installation-01_3_installation_logstash-__codelineno-0-25"></a>    &quot;transient_metadata&quot;: {
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#installation-01_3_installation_logstash-__codelineno-0-26"></a>      &quot;enabled&quot;: true
<a id="__codelineno-0-27" name="__codelineno-0-27" href="#installation-01_3_installation_logstash-__codelineno-0-27"></a>    }
<a id="__codelineno-0-28" name="__codelineno-0-28" href="#installation-01_3_installation_logstash-__codelineno-0-28"></a>}
<a id="__codelineno-0-29" name="__codelineno-0-29" href="#installation-01_3_installation_logstash-__codelineno-0-29"></a>
<a id="__codelineno-0-30" name="__codelineno-0-30" href="#installation-01_3_installation_logstash-__codelineno-0-30"></a>POST /_security/user/logstash_writer
<a id="__codelineno-0-31" name="__codelineno-0-31" href="#installation-01_3_installation_logstash-__codelineno-0-31"></a>{
<a id="__codelineno-0-32" name="__codelineno-0-32" href="#installation-01_3_installation_logstash-__codelineno-0-32"></a>  &quot;username&quot;: &quot;logstash_writer&quot;,
<a id="__codelineno-0-33" name="__codelineno-0-33" href="#installation-01_3_installation_logstash-__codelineno-0-33"></a>  &quot;roles&quot;: [
<a id="__codelineno-0-34" name="__codelineno-0-34" href="#installation-01_3_installation_logstash-__codelineno-0-34"></a>    &quot;logstash_write_role&quot;
<a id="__codelineno-0-35" name="__codelineno-0-35" href="#installation-01_3_installation_logstash-__codelineno-0-35"></a>  ],
<a id="__codelineno-0-36" name="__codelineno-0-36" href="#installation-01_3_installation_logstash-__codelineno-0-36"></a>  &quot;full_name&quot;: null,
<a id="__codelineno-0-37" name="__codelineno-0-37" href="#installation-01_3_installation_logstash-__codelineno-0-37"></a>  &quot;email&quot;: null,
<a id="__codelineno-0-38" name="__codelineno-0-38" href="#installation-01_3_installation_logstash-__codelineno-0-38"></a>  &quot;password&quot;: &quot;PASSWORD&quot;,
<a id="__codelineno-0-39" name="__codelineno-0-39" href="#installation-01_3_installation_logstash-__codelineno-0-39"></a>  &quot;enabled&quot;: true
<a id="__codelineno-0-40" name="__codelineno-0-40" href="#installation-01_3_installation_logstash-__codelineno-0-40"></a>}
</code></pre></div>
<p>Mit <code>/user/share/elasticsearch/bin/elasticsearch_reset_password -u logstash_writer</code> muss das Passwort neu gesetzt werden und dann per Dev Tools in Kibana gesetzt werden.</p>
<h2 id="installation-01_3_installation_logstash-zertifikate-ubertragen">Zertifikate übertragen</h2>
<p>Übertragung des Zertifikats per
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#installation-01_3_installation_logstash-__codelineno-1-1"></a>scp<span class="w"> </span>path/to/http_ca.crt<span class="w"> </span>user@IP:/home/user
</code></pre></div></p>
<p>Übertragung des SSL-Keys per 
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#installation-01_3_installation_logstash-__codelineno-2-1"></a>scp<span class="w"> </span>path/to/http.p12<span class="w"> </span>user@IP:/home/user
</code></pre></div></p>
<h1 id="installation-01_3_installation_logstash-server-b">Server B</h1>
<p><strong>Installation</strong>
Installation von Logstash auf dem Server.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#installation-01_3_installation_logstash-__codelineno-3-1"></a>vim /etc/yum.repos.d/logstash.repo
</code></pre></div>
Repo-Datei: logstash.repo
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#installation-01_3_installation_logstash-__codelineno-4-1"></a>[logstash-8.x]
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#installation-01_3_installation_logstash-__codelineno-4-2"></a>name=Elastic repository for 8.x packages
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#installation-01_3_installation_logstash-__codelineno-4-3"></a>baseurl=https://artifacts.elastic.co/packages/8.x/yum
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#installation-01_3_installation_logstash-__codelineno-4-4"></a>gpgcheck=1
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#installation-01_3_installation_logstash-__codelineno-4-5"></a>gpgkey=https://artifacts.elastic.co/GPG-KEY-elasticsearch
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#installation-01_3_installation_logstash-__codelineno-4-6"></a>enabled=1
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#installation-01_3_installation_logstash-__codelineno-4-7"></a>autorefresh=1
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#installation-01_3_installation_logstash-__codelineno-4-8"></a>type=rpm-md
</code></pre></div>
Logstash über die Kommandozeile installieren und Zertifikate in ein Verzeichnis ablegen. Zusätzlich müssen dann die User/Group Berechtigungen von root auf logstash geändert werden, damit Logstash die Zertifikate finden und nutzen kann.
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#installation-01_3_installation_logstash-__codelineno-5-1"></a># Installation
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#installation-01_3_installation_logstash-__codelineno-5-2"></a>dnf install logstash
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#installation-01_3_installation_logstash-__codelineno-5-3"></a>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#installation-01_3_installation_logstash-__codelineno-5-4"></a># Erstellung des Ordners für die Zertifikate und der Kopiervorgang
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#installation-01_3_installation_logstash-__codelineno-5-5"></a>mkdir /etc/logstash/certs
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#installation-01_3_installation_logstash-__codelineno-5-6"></a>cp /home/user/http* /etc/logstash/certs/
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#installation-01_3_installation_logstash-__codelineno-5-7"></a>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#installation-01_3_installation_logstash-__codelineno-5-8"></a># Änderung der Rechte
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#installation-01_3_installation_logstash-__codelineno-5-9"></a>chown -R logstash:logstash /etc/logstash/
</code></pre></div>
<strong>Konfiguration</strong>
Die Konfigurations-Datei von Logstash bearbeiten
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#installation-01_3_installation_logstash-__codelineno-6-1"></a>vim /etc/logstash/logstash.yml
</code></pre></div>
Entscheidend sind die X-Pack bzw SSL -Einstellungen:
(Für den logstash_system User muss entweder das Passwort auf dem Elasticserver neu generiert werden oder man kennt es schon)
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#installation-01_3_installation_logstash-__codelineno-7-1"></a># X-Pack Management
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#installation-01_3_installation_logstash-__codelineno-7-2"></a>xpack.management.enabled: true
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#installation-01_3_installation_logstash-__codelineno-7-3"></a>xpack.management.elasticsearch.username: logstash_system
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#installation-01_3_installation_logstash-__codelineno-7-4"></a>xpack.management.elasticsearch.password: &#39;PASSWORD&#39;
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#installation-01_3_installation_logstash-__codelineno-7-5"></a>xpack.management.elasticsearch.hosts: &quot;https://IP:9200&quot;
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#installation-01_3_installation_logstash-__codelineno-7-6"></a>xpack.management.elasticsearch.ssl.certificate_authority: &quot;/etc/logstash/certs/http_ca.crt&quot;
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#installation-01_3_installation_logstash-__codelineno-7-7"></a>xpack.management.elasticsearch.ssl.certificate: &quot;/etc/logstash/certs/http_ca.crt&quot;
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#installation-01_3_installation_logstash-__codelineno-7-8"></a>xpack.management.elasticsearch.ssl.key: &quot;/etc/logstash/certs/http.p12&quot;
</code></pre></div></p>
<p>Es muss eine Konfigurationsdatei für die Pipeline von Filebeat -&gt; Logstash -&gt; Elasticsearch konfiguriert werden.
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#installation-01_3_installation_logstash-__codelineno-8-1"></a>vim /etc/logstash/conf.d/logstash.conf
</code></pre></div>
<em>Lesson learned:</em> Die Conf-Dateien müssen unter conf.d stehen
<em>Lesson learned</em>: SSL ist bei Logstash auch ein "Problem".
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#installation-01_3_installation_logstash-__codelineno-9-1"></a>input {
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#installation-01_3_installation_logstash-__codelineno-9-2"></a>  beats {
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#installation-01_3_installation_logstash-__codelineno-9-3"></a>     port =&gt; 5044
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#installation-01_3_installation_logstash-__codelineno-9-4"></a>     }
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#installation-01_3_installation_logstash-__codelineno-9-5"></a>}
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#installation-01_3_installation_logstash-__codelineno-9-6"></a>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#installation-01_3_installation_logstash-__codelineno-9-7"></a>filter {    #&lt;---- Hier kann der Filter definiert werden
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#installation-01_3_installation_logstash-__codelineno-9-8"></a>  grok {
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#installation-01_3_installation_logstash-__codelineno-9-9"></a>    match =&gt; {}
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#installation-01_3_installation_logstash-__codelineno-9-10"></a>  }
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#installation-01_3_installation_logstash-__codelineno-9-11"></a>  date {
<a id="__codelineno-9-12" name="__codelineno-9-12" href="#installation-01_3_installation_logstash-__codelineno-9-12"></a>    match =&gt; []
<a id="__codelineno-9-13" name="__codelineno-9-13" href="#installation-01_3_installation_logstash-__codelineno-9-13"></a>    target =&gt; &quot;&quot;
<a id="__codelineno-9-14" name="__codelineno-9-14" href="#installation-01_3_installation_logstash-__codelineno-9-14"></a>  }
<a id="__codelineno-9-15" name="__codelineno-9-15" href="#installation-01_3_installation_logstash-__codelineno-9-15"></a>}
<a id="__codelineno-9-16" name="__codelineno-9-16" href="#installation-01_3_installation_logstash-__codelineno-9-16"></a>
<a id="__codelineno-9-17" name="__codelineno-9-17" href="#installation-01_3_installation_logstash-__codelineno-9-17"></a>output {
<a id="__codelineno-9-18" name="__codelineno-9-18" href="#installation-01_3_installation_logstash-__codelineno-9-18"></a>  elasticsearch {
<a id="__codelineno-9-19" name="__codelineno-9-19" href="#installation-01_3_installation_logstash-__codelineno-9-19"></a>    hosts =&gt; [&quot;https://IP:9200&quot;]
<a id="__codelineno-9-20" name="__codelineno-9-20" href="#installation-01_3_installation_logstash-__codelineno-9-20"></a>    index =&gt; &quot;%{[@metadata][beat]}-%{[@metadata][version]}&quot;
<a id="__codelineno-9-21" name="__codelineno-9-21" href="#installation-01_3_installation_logstash-__codelineno-9-21"></a>    cacert =&gt; &#39;/etc/logstash/certs/http_ca_crt&#39;    #&lt;--- Kann natürlich Variable sein
<a id="__codelineno-9-22" name="__codelineno-9-22" href="#installation-01_3_installation_logstash-__codelineno-9-22"></a>    user =&gt; &quot;logstash_writer&quot;
<a id="__codelineno-9-23" name="__codelineno-9-23" href="#installation-01_3_installation_logstash-__codelineno-9-23"></a>    password =&gt; &quot;PASSWORD&quot;
<a id="__codelineno-9-24" name="__codelineno-9-24" href="#installation-01_3_installation_logstash-__codelineno-9-24"></a>    ssl =&gt; true
<a id="__codelineno-9-25" name="__codelineno-9-25" href="#installation-01_3_installation_logstash-__codelineno-9-25"></a>  }
<a id="__codelineno-9-26" name="__codelineno-9-26" href="#installation-01_3_installation_logstash-__codelineno-9-26"></a>}
</code></pre></div></p>
<p>Konfig testen:
/usr/share/logstash/bin/logstash -f /etc/logstash/conf.d/logstash.conf --config.test_and_exit</p></section><section class="print-page" id="installation-01_4_installation_beats"><h1 id="installation-01_4_installation_beats-install-filebeat">Install Filebeat</h1>
<p><strong>Installation</strong>
Stelle sicher, dass Kibana läuft.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#installation-01_4_installation_beats-__codelineno-0-1"></a>dnf install filebeat
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#installation-01_4_installation_beats-__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#installation-01_4_installation_beats-__codelineno-0-3"></a>sudo filebeat modules enable system
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#installation-01_4_installation_beats-__codelineno-0-4"></a>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#installation-01_4_installation_beats-__codelineno-0-5"></a>vim /etc/filebeat/filebeat.yml
</code></pre></div>
Die filebeat.yml ist die Konfig-Datei für Filebeat.</p>
<p><strong>Konfiguration</strong>
Auf jeder Maschine muss eine Filebeat/Beat Konfigurationsdatei angelegt werden. 
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#installation-01_4_installation_beats-__codelineno-1-1"></a>...
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#installation-01_4_installation_beats-__codelineno-1-2"></a>#----------------Filebeat Input--------------------
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#installation-01_4_installation_beats-__codelineno-1-3"></a>filebeat.inputs:
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#installation-01_4_installation_beats-__codelineno-1-4"></a>- type: log   #Hier wird ein Typ angegeben
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#installation-01_4_installation_beats-__codelineno-1-5"></a>  enabled: true
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#installation-01_4_installation_beats-__codelineno-1-6"></a>  paths:      #Hier werden die Pfade zu den Daten angeben
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#installation-01_4_installation_beats-__codelineno-1-7"></a>    - /var/log/*.log
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#installation-01_4_installation_beats-__codelineno-1-8"></a>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#installation-01_4_installation_beats-__codelineno-1-9"></a>#--------------------Logstash Output--------------------
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#installation-01_4_installation_beats-__codelineno-1-10"></a>output.logstash
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#installation-01_4_installation_beats-__codelineno-1-11"></a>  hosts: [&quot;localhost:5044&quot;]
</code></pre></div></p>
<p>Möchte man Module nutzen, müssen diese per <code>filebeat module enable MODULNAME</code> angeschaltet werden. Die Module liegen unter <em>/etc/filebeat/modules</em>. Das Kommando benennt die Datei von <em>MODULNAME-disabled.yml</em> in <em>MODULNAME.yml</em></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#installation-01_4_installation_beats-__codelineno-2-1"></a>/usr/share/filebeat/bin/filebeat -e -c /etc/filebeat/filebeat.yml -d &quot;publish&quot;
</code></pre></div></section><section class="print-page" id="installation-02_1_installation_three_node_cluster"><h1 id="installation-02_1_installation_three_node_cluster-installation-elasticsearch-three-node-cluster">Installation Elasticsearch - Three Node CLuster</h1>
<h2 id="installation-02_1_installation_three_node_cluster-umgebung">Umgebung:</h2>
<table>
<thead>
<tr>
<th>Komponente</th>
<th>Name</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>Link</em>:</td>
<td>https://www.elastic.co/guide/en/elasticsearch/reference/current/rpm.html</td>
</tr>
<tr>
<td><em>OS:</em></td>
<td>Centos Stream 9</td>
</tr>
<tr>
<td>Virtualisierung:</td>
<td>vSphere</td>
</tr>
<tr>
<td>Server A:</td>
<td>Elasticsearch</td>
</tr>
<tr>
<td>Server B</td>
<td>Elasticsearch</td>
</tr>
<tr>
<td>Server C:</td>
<td>Elasticsearch</td>
</tr>
<tr>
<td>Server D:</td>
<td>Kibana</td>
</tr>
<tr>
<td>Voraussetzung:</td>
<td>JAVA JDK Version</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="installation-02_1_installation_three_node_cluster-server-a">Server A</h2>
<h2 id="installation-02_1_installation_three_node_cluster-elasticsearch-installation">Elasticsearch Installation</h2>
<p>Per Repo-Einbindung Elastic installieren:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#installation-02_1_installation_three_node_cluster-__codelineno-0-1"></a>cd /etc/yum.repos.d/
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#installation-02_1_installation_three_node_cluster-__codelineno-0-2"></a>sudo vim elasticsearch.repo
</code></pre></div>
Info: Repo sollte für alle drei Komponenten ausreichen (Elastic, Filebeat, Kibana)
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#installation-02_1_installation_three_node_cluster-__codelineno-1-1"></a>[elasticsearch]
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#installation-02_1_installation_three_node_cluster-__codelineno-1-2"></a>name=Elastic repository for 8.x packages
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#installation-02_1_installation_three_node_cluster-__codelineno-1-3"></a>baseurl=https://artifacts.elastic.co/packages/8.x/yum
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#installation-02_1_installation_three_node_cluster-__codelineno-1-4"></a>gpgcheck=1
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#installation-02_1_installation_three_node_cluster-__codelineno-1-5"></a>gpgkey=https://artifacts.elastic.co/GPG-KEY-elasticsearch
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#installation-02_1_installation_three_node_cluster-__codelineno-1-6"></a>enabled=1
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#installation-02_1_installation_three_node_cluster-__codelineno-1-7"></a>autorefresh=1
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#installation-02_1_installation_three_node_cluster-__codelineno-1-8"></a>type=rpm-md
</code></pre></div>
Auf der Kommandozeile folgende Befehle absetzen:
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#installation-02_1_installation_three_node_cluster-__codelineno-2-1"></a>Optional (nur unter RHEL9): update-crypto-policies --set DEFAULT:SHA1
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#installation-02_1_installation_three_node_cluster-__codelineno-2-2"></a>sudo dnf install --enablerepo=elasticsearch elasticsearch
</code></pre></div></p>
<p><em>Lesson learned</em> = Es wird ein <em>elastic</em> (Superuser) Passwort nach der Installation im Terminal ausgegeben. Das Passwort ist wichtig für den Zugang zu Elasticsearch. Also am besten speichern. Elasticsearch gibt in der Doku an, das Passwort in eine Umgebungsvariable zu speichern. Erscheint mir unsicher, aber für lokale Instanzen zum ausprobieren sollte es okay sein.  In Elasticsearch 8+ sind die Sicherheitseinstellungen an. Das bedeutet, dass in der elasticsearch.yml mehr Optionen in der eingetragen werden müssen als die initiale Doku zeigt.
<em>Lesson learned</em> = Entweder über eine .repo Datei oder über ein wget die Installation ermöglichen</p>
<p><strong>Konfiguration</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#installation-02_1_installation_three_node_cluster-__codelineno-3-1"></a>sudo vim /etc/elasticsearch/elasticsearch.yml
</code></pre></div></p>
<details class="abstract">
<summary>Full <code>elasticsearch.yaml</code></summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-1"></a><span class="w">    </span><span class="c1"># ----------------------------Cluster------------------</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-2"></a>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-3"></a><span class="w">    </span><span class="c1">#-------------------------------Node------------------</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-4"></a><span class="w">    </span><span class="nt">node.name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">localhost</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-5"></a>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-6"></a>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-7"></a><span class="w">    </span><span class="c1"># Set the bind address to a specific IP (IPv4 or IPv6): </span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-8"></a><span class="w">     </span><span class="nt">network.host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">localhost</span><span class="w"> </span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-9"></a><span class="w">    </span><span class="c1">#</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-10"></a><span class="w">    </span><span class="c1"># Set a custom port for HTTP: </span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-11"></a><span class="w">     </span><span class="nt">http.port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">9200</span>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-12"></a><span class="w">    </span><span class="c1"># elasticsearch.host: [&quot;http://localhost:9200&quot;]</span>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-13"></a>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-14"></a><span class="w">    </span><span class="c1"># --------------------------------- Discovery ----------------------------------</span>
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-15"></a><span class="w">    </span><span class="c1">#</span>
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-16"></a><span class="w">    </span><span class="c1"># Pass an initial list of hosts to perform discovery when this node is started:</span>
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-17"></a><span class="w">    </span><span class="c1"># The default list of hosts is [&quot;127.0.0.1&quot;, &quot;[::1]&quot;]</span>
<a id="__codelineno-4-18" name="__codelineno-4-18" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-18"></a><span class="w">    </span><span class="c1">#</span>
<a id="__codelineno-4-19" name="__codelineno-4-19" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-19"></a><span class="w">    </span><span class="nt">discovery.seed_hosts</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;127.0.0.1&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-4-20" name="__codelineno-4-20" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-20"></a><span class="w">    </span><span class="c1">#</span>
<a id="__codelineno-4-21" name="__codelineno-4-21" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-21"></a><span class="w">    </span><span class="c1"># Bootstrap the cluster using an initial set of master-eligible nodes:</span>
<a id="__codelineno-4-22" name="__codelineno-4-22" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-22"></a><span class="w">    </span><span class="c1">#</span>
<a id="__codelineno-4-23" name="__codelineno-4-23" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-23"></a><span class="w">    </span><span class="c1">#----------------------- BEGIN SECURITY AUTO CONFIGURATION -----------------------</span>
<a id="__codelineno-4-24" name="__codelineno-4-24" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-24"></a><span class="w">    </span><span class="c1">#</span>
<a id="__codelineno-4-25" name="__codelineno-4-25" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-25"></a><span class="w">    </span><span class="c1"># The following settings, TLS certificates, and keys have been automatically      </span>
<a id="__codelineno-4-26" name="__codelineno-4-26" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-26"></a><span class="w">    </span><span class="c1"># generated to configure Elasticsearch security features on 28-08-2023 14:32:16</span>
<a id="__codelineno-4-27" name="__codelineno-4-27" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-27"></a><span class="w">    </span><span class="c1">#</span>
<a id="__codelineno-4-28" name="__codelineno-4-28" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-28"></a><span class="w">    </span><span class="c1"># --------------------------------------------------------------------------------</span>
<a id="__codelineno-4-29" name="__codelineno-4-29" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-29"></a>
<a id="__codelineno-4-30" name="__codelineno-4-30" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-30"></a><span class="w">    </span><span class="c1"># Enable security features</span>
<a id="__codelineno-4-31" name="__codelineno-4-31" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-31"></a>
<a id="__codelineno-4-32" name="__codelineno-4-32" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-32"></a><span class="w">    </span><span class="nt">xpack.security.enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-4-33" name="__codelineno-4-33" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-33"></a><span class="w">    </span><span class="nt">xpack.security.enrollment.enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-4-34" name="__codelineno-4-34" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-34"></a>
<a id="__codelineno-4-35" name="__codelineno-4-35" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-35"></a><span class="w">    </span><span class="c1"># Enable encryption for HTTP API client connections, such as Kibana, Logstash, and Agents</span>
<a id="__codelineno-4-36" name="__codelineno-4-36" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-36"></a><span class="w">    </span><span class="nt">xpack.security.http.ssl</span><span class="p">:</span>
<a id="__codelineno-4-37" name="__codelineno-4-37" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-37"></a><span class="w">      </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-4-38" name="__codelineno-4-38" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-38"></a><span class="w">      </span><span class="nt">keystore.path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/elasticsearch/certs/http.p12</span>
<a id="__codelineno-4-39" name="__codelineno-4-39" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-39"></a>
<a id="__codelineno-4-40" name="__codelineno-4-40" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-40"></a><span class="w">    </span><span class="c1"># Enable encryption and mutual authentication between cluster nodes</span>
<a id="__codelineno-4-41" name="__codelineno-4-41" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-41"></a><span class="w">    </span><span class="nt">xpack.security.transport.ssl</span><span class="p">:</span>
<a id="__codelineno-4-42" name="__codelineno-4-42" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-42"></a><span class="w">      </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-4-43" name="__codelineno-4-43" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-43"></a><span class="w">      </span><span class="nt">verification_mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">certificate</span>
<a id="__codelineno-4-44" name="__codelineno-4-44" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-44"></a><span class="w">      </span><span class="nt">keystore.path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/elasticsearch/certs/transport.p12</span>
<a id="__codelineno-4-45" name="__codelineno-4-45" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-45"></a><span class="w">      </span><span class="nt">truststore.path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/elasticsearch/certs/certs/transport.p12</span>
<a id="__codelineno-4-46" name="__codelineno-4-46" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-46"></a><span class="w">    </span><span class="c1"># Create a new cluster with the current node only</span>
<a id="__codelineno-4-47" name="__codelineno-4-47" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-47"></a><span class="w">    </span><span class="c1"># Additional nodes can still join the cluster later</span>
<a id="__codelineno-4-48" name="__codelineno-4-48" href="#installation-02_1_installation_three_node_cluster-__codelineno-4-48"></a><span class="w">    </span><span class="nt">cluster.initial_master_nodes</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;localhost.localdomain&quot;</span><span class="p p-Indicator">]</span><span class="w">                         </span><span class="c1"># Wenn DNS genutzt werden soll/wird, muss hier der FQDN des Servers stehen</span>
</code></pre></div>
</details>
<p>Das bei der Installation erschaffenene Zertifikat muss noch per <code>scp</code> an den Server B (auf dem Logstash installiert wird) kopiert werden und in dem Ordner hinterlegt werden, der in der <code>logstash.yml</code> angegeben ist. </p>
<p><em>Lesson learned:</em> Wenn man DNS nutzt, dann muss unter <code>cluster.initial_master_nodes</code> ein FQDN eingetragen werden. Probleme kann es geben, wenn der Name nachträglich angepasst wird, nachdem man Elastic installiert hat, da dann die Zertifikate falsch sind.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#installation-02_1_installation_three_node_cluster-__codelineno-5-1"></a>systemctl daemon-reload
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#installation-02_1_installation_three_node_cluster-__codelineno-5-2"></a>systemctl enable elasticsearch
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#installation-02_1_installation_three_node_cluster-__codelineno-5-3"></a>systemctl start elasticsearch
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#installation-02_1_installation_three_node_cluster-__codelineno-5-4"></a>firewall-cmd --add-port=9200/tcp --permanent
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#installation-02_1_installation_three_node_cluster-__codelineno-5-5"></a>firewall-cmd --reload
</code></pre></div>
<p><strong>Keystore</strong> </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#installation-02_1_installation_three_node_cluster-__codelineno-6-1"></a>Nur wenn unter /etc/elasticsearch/ noch nicht enthalten ist:
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#installation-02_1_installation_three_node_cluster-__codelineno-6-2"></a>/usr/share/elasticsearch/bin/elasticsearch-keystore create
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#installation-02_1_installation_three_node_cluster-__codelineno-6-3"></a>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#installation-02_1_installation_three_node_cluster-__codelineno-6-4"></a>Passwort immer neu setzen:
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#installation-02_1_installation_three_node_cluster-__codelineno-6-5"></a>/usr/share/elasticsearch/bin/elasticsearch-keystore passwd
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#installation-02_1_installation_three_node_cluster-__codelineno-6-6"></a>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#installation-02_1_installation_three_node_cluster-__codelineno-6-7"></a>Passwort anzeigen lassen
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#installation-02_1_installation_three_node_cluster-__codelineno-6-8"></a>/usr/share/elasticsearch/bin/elasticsearch-keystore show xpack.security.http.ssl.keystore.secure_password
</code></pre></div>
<p>Um eine CA zu erstellen, muss folgender Befehl eingegeben werden:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#installation-02_1_installation_three_node_cluster-__codelineno-7-1"></a>Erstellt eine CA:
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#installation-02_1_installation_three_node_cluster-__codelineno-7-2"></a>/usr/share/elasticsearch/bin/elasticsearch-certutil ca
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#installation-02_1_installation_three_node_cluster-__codelineno-7-3"></a>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#installation-02_1_installation_three_node_cluster-__codelineno-7-4"></a>Erstellt ein Cert(braucht man aber bei einem Server nicht, da Initial Certs mitkommen):
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#installation-02_1_installation_three_node_cluster-__codelineno-7-5"></a>/usr/share/elasticsearch/bin/elasticsearch-certutil cert --ca elastic-stack-ca.p12
</code></pre></div>
<p><em>Lesson learned:</em> In Elastic 8 oder neu wird SSL im Default aktiviert</p>
<p>Der Server muss dann rebootet werden.</p>
<hr />
<h1 id="installation-02_1_installation_three_node_cluster-kibana-installation">Kibana Installation</h1>
<p>Kibana Repo unter <code>/etc/yum.repos.d/kibana.repo</code> anlegen.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#installation-02_1_installation_three_node_cluster-__codelineno-8-1"></a>sudo dnf install kibana
</code></pre></div>
<p><strong>Konfiguration</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#installation-02_1_installation_three_node_cluster-__codelineno-9-1"></a>sudo vim /etc/kibana/kibana.yml
</code></pre></div></p>
<p>Entferne die # vor den Einträgen:
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#installation-02_1_installation_three_node_cluster-__codelineno-10-1"></a>server.port: 5601                                 
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#installation-02_1_installation_three_node_cluster-__codelineno-10-2"></a>server.host: &quot;localhost&quot;                          # Alternative hier eine IP Addresse ohne &quot;&quot; eintragen
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#installation-02_1_installation_three_node_cluster-__codelineno-10-3"></a>elasticsearch.hosts: [&quot;https://localhost:9200&quot;]
</code></pre></div>
Folgende Befehle absetzen:
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#installation-02_1_installation_three_node_cluster-__codelineno-11-1"></a>systemctl start kibana
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#installation-02_1_installation_three_node_cluster-__codelineno-11-2"></a>systemctl enable kibana
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#installation-02_1_installation_three_node_cluster-__codelineno-11-3"></a>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#installation-02_1_installation_three_node_cluster-__codelineno-11-4"></a>firewall-cmd --add-port=5601/tcp --permanent
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#installation-02_1_installation_three_node_cluster-__codelineno-11-5"></a>firewall-cmd --reload
</code></pre></div></p>
<p>Einen Enrollment-Token für Kibana erstellen:
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#installation-02_1_installation_three_node_cluster-__codelineno-12-1"></a>/usr/share/elasticsearch/bin/elasticsearch-create-enrollment-token --scope kibana
</code></pre></div>
Den Token auf "localhost:5601" im Browser eingeben.
Auf dem Server einen Verifizierungs-Code erstellen und im Browser eingeben:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#installation-02_1_installation_three_node_cluster-__codelineno-13-1"></a>/usr/share/kibana/bin/kibana-verification-code
</code></pre></div>
<hr />
<h1 id="installation-02_1_installation_three_node_cluster-server-a_1">Server A</h1>
<h1 id="installation-02_1_installation_three_node_cluster-install-logstash">Install Logstash</h1>
<p><strong>User anlegen:</strong>
In Kibana (auf Server A) muss unter Management -&gt; Dev Tools per API ein User <code>logstash_writer</code> und die Rolle <code>logstash_writer_role</code> erstellt werden.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-1"></a>POST /_security/user/role/logstash_write_role
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-2"></a>{
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-3"></a>    &quot;cluster&quot;: [
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-4"></a>      &quot;monitor&quot;,
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-5"></a>      &quot;manage_index_templates&quot;
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-6"></a>    ],
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-7"></a>    &quot;indices&quot;: [
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-8"></a>      {
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-9"></a>        &quot;names&quot;: [
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-10"></a>           &quot;filebeat*&quot;
<a id="__codelineno-14-11" name="__codelineno-14-11" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-11"></a>        ],
<a id="__codelineno-14-12" name="__codelineno-14-12" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-12"></a>        &quot;privileges&quot;: [
<a id="__codelineno-14-13" name="__codelineno-14-13" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-13"></a>          &quot;write&quot;,
<a id="__codelineno-14-14" name="__codelineno-14-14" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-14"></a>          &quot;create_index&quot;
<a id="__codelineno-14-15" name="__codelineno-14-15" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-15"></a>        ],
<a id="__codelineno-14-16" name="__codelineno-14-16" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-16"></a>        &quot;field_security&quot;: {
<a id="__codelineno-14-17" name="__codelineno-14-17" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-17"></a>          &quot;grant&quot;: [
<a id="__codelineno-14-18" name="__codelineno-14-18" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-18"></a>            &quot;*&quot;
<a id="__codelineno-14-19" name="__codelineno-14-19" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-19"></a>          ]
<a id="__codelineno-14-20" name="__codelineno-14-20" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-20"></a>        }
<a id="__codelineno-14-21" name="__codelineno-14-21" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-21"></a>      }
<a id="__codelineno-14-22" name="__codelineno-14-22" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-22"></a>    ],
<a id="__codelineno-14-23" name="__codelineno-14-23" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-23"></a>    &quot;run_as&quot;: [],
<a id="__codelineno-14-24" name="__codelineno-14-24" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-24"></a>    &quot;metadata&quot;: {},
<a id="__codelineno-14-25" name="__codelineno-14-25" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-25"></a>    &quot;transient_metadata&quot;: {
<a id="__codelineno-14-26" name="__codelineno-14-26" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-26"></a>      &quot;enabled&quot;: true
<a id="__codelineno-14-27" name="__codelineno-14-27" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-27"></a>    }
<a id="__codelineno-14-28" name="__codelineno-14-28" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-28"></a>}
<a id="__codelineno-14-29" name="__codelineno-14-29" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-29"></a>
<a id="__codelineno-14-30" name="__codelineno-14-30" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-30"></a>POST /_security/user/logstash_writer
<a id="__codelineno-14-31" name="__codelineno-14-31" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-31"></a>{
<a id="__codelineno-14-32" name="__codelineno-14-32" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-32"></a>  &quot;username&quot;: &quot;logstash_writer&quot;,
<a id="__codelineno-14-33" name="__codelineno-14-33" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-33"></a>  &quot;roles&quot; [
<a id="__codelineno-14-34" name="__codelineno-14-34" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-34"></a>    &quot;logstash_write_role&quot;
<a id="__codelineno-14-35" name="__codelineno-14-35" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-35"></a>  ],
<a id="__codelineno-14-36" name="__codelineno-14-36" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-36"></a>  &quot;full_name&quot;: null,
<a id="__codelineno-14-37" name="__codelineno-14-37" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-37"></a>  &quot;email&quot;: null
<a id="__codelineno-14-38" name="__codelineno-14-38" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-38"></a>  &quot;password&quot;: &quot;PASSWORD&quot;
<a id="__codelineno-14-39" name="__codelineno-14-39" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-39"></a>  &quot;enabled&quot;: true
<a id="__codelineno-14-40" name="__codelineno-14-40" href="#installation-02_1_installation_three_node_cluster-__codelineno-14-40"></a>}
</code></pre></div>
<p>Mit <code>/user/share/elasticsearch/bin/elasticsearch_reset_password -u logstash_writer</code> muss das Passwort neu gesetzt werden und dann per Dev Tools in Kibana gesetzt werden.</p>
<p><strong>Zertifikate übertragen</strong>
Übertragung des Zertifikats per <code>scp path/to/http_ca.crt user@IP:/home/user
Übertragung des SSL-Keys per</code>scp path/to/http.p12 user@IP:/home/user</p>
<h1 id="installation-02_1_installation_three_node_cluster-server-b">Server B</h1>
<p><strong>Installation</strong>
Installation von Logstash auf dem Server.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#installation-02_1_installation_three_node_cluster-__codelineno-15-1"></a>vim /etc/yum.repos.d/logstash.repo
</code></pre></div>
Repo-Datei: logstash.repo
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#installation-02_1_installation_three_node_cluster-__codelineno-16-1"></a>[logstash-8.x]
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#installation-02_1_installation_three_node_cluster-__codelineno-16-2"></a>name=Elastic repository for 8.x packages
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#installation-02_1_installation_three_node_cluster-__codelineno-16-3"></a>baseurl=https://artifacts.elastic.co/packages/8.x/yum
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#installation-02_1_installation_three_node_cluster-__codelineno-16-4"></a>gpgcheck=1
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#installation-02_1_installation_three_node_cluster-__codelineno-16-5"></a>gpgkey=https://artifacts.elastic.co/GPG-KEY-elasticsearch
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#installation-02_1_installation_three_node_cluster-__codelineno-16-6"></a>enabled=1
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#installation-02_1_installation_three_node_cluster-__codelineno-16-7"></a>autorefresh=1
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#installation-02_1_installation_three_node_cluster-__codelineno-16-8"></a>type=rpm-md
</code></pre></div>
Logstash über die Kommandozeile installieren und Zertifikate in ein Verzeichnis ablegen. Zusätzlich müssen dann die User/Group Berechtigungen von root auf logstash geändert werden, damit Logstash die Zertifikate finden und nutzen kann.
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#installation-02_1_installation_three_node_cluster-__codelineno-17-1"></a># Installation
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#installation-02_1_installation_three_node_cluster-__codelineno-17-2"></a>dnf install logstash
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#installation-02_1_installation_three_node_cluster-__codelineno-17-3"></a>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#installation-02_1_installation_three_node_cluster-__codelineno-17-4"></a># Erstellung des Ordners für die Zertifikate und der Kopiervorgang
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#installation-02_1_installation_three_node_cluster-__codelineno-17-5"></a>mkdir /etc/logstash/certs
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#installation-02_1_installation_three_node_cluster-__codelineno-17-6"></a>cp /home/user/http* /etc/logstash/certs/
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#installation-02_1_installation_three_node_cluster-__codelineno-17-7"></a>
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#installation-02_1_installation_three_node_cluster-__codelineno-17-8"></a># Änderung der Rechte
<a id="__codelineno-17-9" name="__codelineno-17-9" href="#installation-02_1_installation_three_node_cluster-__codelineno-17-9"></a>chown -R logstash:logstash /etc/logstash/
</code></pre></div>
<strong>Konfiguration</strong>
Die Konfigurations-Datei von Logstash bearbeiten
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#installation-02_1_installation_three_node_cluster-__codelineno-18-1"></a>vim /etc/logstash/logstash.yml
</code></pre></div>
Entscheidend sind die X-Pack bzw SSL -Einstellungen:
(Für den logstash_system User muss entweder das Passwort auf dem Elasticserver neu generiert werden oder man kennt es schon)
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#installation-02_1_installation_three_node_cluster-__codelineno-19-1"></a># X-Pack Management
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#installation-02_1_installation_three_node_cluster-__codelineno-19-2"></a>xpack.management.enabled: true
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#installation-02_1_installation_three_node_cluster-__codelineno-19-3"></a>xpack.management.elasticsearch.username: logstash_system
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#installation-02_1_installation_three_node_cluster-__codelineno-19-4"></a>xpack.management.elasticsearch.password: &#39;PASSWORD&#39;
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#installation-02_1_installation_three_node_cluster-__codelineno-19-5"></a>xpack.management.elasticsearch.hosts: &quot;https://IP:9200&quot;
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#installation-02_1_installation_three_node_cluster-__codelineno-19-6"></a>xpack.management.elasticsearch.ssl.certificate_authority: &quot;/etc/logstash/certs/http_ca.crt&quot;
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#installation-02_1_installation_three_node_cluster-__codelineno-19-7"></a>xpack.management.elasticsearch.ssl.keystore.path: &quot;/etc/logstash/certs/http.p12&quot;
<a id="__codelineno-19-8" name="__codelineno-19-8" href="#installation-02_1_installation_three_node_cluster-__codelineno-19-8"></a>xpack.management.elasticsearch.ssl.keystore.password: &#39;PASSOWRD&#39;
<a id="__codelineno-19-9" name="__codelineno-19-9" href="#installation-02_1_installation_three_node_cluster-__codelineno-19-9"></a>#xpack.management.elasticsearch.ssl.certificate: &quot;/etc/logstash/certs/http_ca.crt&quot;
<a id="__codelineno-19-10" name="__codelineno-19-10" href="#installation-02_1_installation_three_node_cluster-__codelineno-19-10"></a>#xpack.management.elasticsearch.ssl.key: &quot;/etc/logstash/certs/http.p12&quot;
</code></pre></div></p>
<p>Es muss eine Konfigurationsdatei für die Pipeline von Filebeat -&gt; Logstash -&gt; Elasticsearch konfiguriert werden.
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#installation-02_1_installation_three_node_cluster-__codelineno-20-1"></a>vim /etc/logstash/conf.d/logstash.conf
</code></pre></div>
<em>Lesson learned:</em> Die Conf-Dateien müssen unter conf.d stehen
<em>Lesson learned</em>: SSL ist bei Logstash auch ein "Problem".  Es scheint so zu sein, dass man die verschlüsselt .p12 Files sind. Man kann das keystore-Passwort auf den Elasticsearch-Maschinen abfragen.
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#installation-02_1_installation_three_node_cluster-__codelineno-21-1"></a>input {
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#installation-02_1_installation_three_node_cluster-__codelineno-21-2"></a>  beats {
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#installation-02_1_installation_three_node_cluster-__codelineno-21-3"></a>     port =&gt; 5044
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#installation-02_1_installation_three_node_cluster-__codelineno-21-4"></a>     }
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#installation-02_1_installation_three_node_cluster-__codelineno-21-5"></a>}
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#installation-02_1_installation_three_node_cluster-__codelineno-21-6"></a>
<a id="__codelineno-21-7" name="__codelineno-21-7" href="#installation-02_1_installation_three_node_cluster-__codelineno-21-7"></a>filter {    #&lt;---- Hier kann der Filter definiert werden
<a id="__codelineno-21-8" name="__codelineno-21-8" href="#installation-02_1_installation_three_node_cluster-__codelineno-21-8"></a>  grok {
<a id="__codelineno-21-9" name="__codelineno-21-9" href="#installation-02_1_installation_three_node_cluster-__codelineno-21-9"></a>    match =&gt; {}
<a id="__codelineno-21-10" name="__codelineno-21-10" href="#installation-02_1_installation_three_node_cluster-__codelineno-21-10"></a>  }
<a id="__codelineno-21-11" name="__codelineno-21-11" href="#installation-02_1_installation_three_node_cluster-__codelineno-21-11"></a>  date {
<a id="__codelineno-21-12" name="__codelineno-21-12" href="#installation-02_1_installation_three_node_cluster-__codelineno-21-12"></a>    match =&gt; []
<a id="__codelineno-21-13" name="__codelineno-21-13" href="#installation-02_1_installation_three_node_cluster-__codelineno-21-13"></a>    target =&gt; &quot;&quot;
<a id="__codelineno-21-14" name="__codelineno-21-14" href="#installation-02_1_installation_three_node_cluster-__codelineno-21-14"></a>  }
<a id="__codelineno-21-15" name="__codelineno-21-15" href="#installation-02_1_installation_three_node_cluster-__codelineno-21-15"></a>}
<a id="__codelineno-21-16" name="__codelineno-21-16" href="#installation-02_1_installation_three_node_cluster-__codelineno-21-16"></a>
<a id="__codelineno-21-17" name="__codelineno-21-17" href="#installation-02_1_installation_three_node_cluster-__codelineno-21-17"></a>output {
<a id="__codelineno-21-18" name="__codelineno-21-18" href="#installation-02_1_installation_three_node_cluster-__codelineno-21-18"></a>  elasticsearch {
<a id="__codelineno-21-19" name="__codelineno-21-19" href="#installation-02_1_installation_three_node_cluster-__codelineno-21-19"></a>    hosts =&gt; [&quot;https://IP:9200&quot;]
<a id="__codelineno-21-20" name="__codelineno-21-20" href="#installation-02_1_installation_three_node_cluster-__codelineno-21-20"></a>    index =&gt; &quot;%{[@metadata][beat]}-%{[@metadata][version]}&quot;
<a id="__codelineno-21-21" name="__codelineno-21-21" href="#installation-02_1_installation_three_node_cluster-__codelineno-21-21"></a>    cacert =&gt; &#39;/etc/logstash/certs/http_ca_crt&#39;    #&lt;--- Kann natürlich Variable sein
<a id="__codelineno-21-22" name="__codelineno-21-22" href="#installation-02_1_installation_three_node_cluster-__codelineno-21-22"></a>    user =&gt; &quot;logstash_writer&quot;
<a id="__codelineno-21-23" name="__codelineno-21-23" href="#installation-02_1_installation_three_node_cluster-__codelineno-21-23"></a>    password =&gt; &quot;PASSWORD&quot;
<a id="__codelineno-21-24" name="__codelineno-21-24" href="#installation-02_1_installation_three_node_cluster-__codelineno-21-24"></a>    ssl =&gt; true
<a id="__codelineno-21-25" name="__codelineno-21-25" href="#installation-02_1_installation_three_node_cluster-__codelineno-21-25"></a>  }
<a id="__codelineno-21-26" name="__codelineno-21-26" href="#installation-02_1_installation_three_node_cluster-__codelineno-21-26"></a>}
</code></pre></div></p>
<h1 id="installation-02_1_installation_three_node_cluster-install-filebeat">Install Filebeat</h1>
<p><strong>Installation</strong>
Stelle sicher, dass Kibana läuft</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#installation-02_1_installation_three_node_cluster-__codelineno-22-1"></a>dnf install filebeat
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#installation-02_1_installation_three_node_cluster-__codelineno-22-2"></a>
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#installation-02_1_installation_three_node_cluster-__codelineno-22-3"></a>sudo filebeat modules enable system
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#installation-02_1_installation_three_node_cluster-__codelineno-22-4"></a>
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#installation-02_1_installation_three_node_cluster-__codelineno-22-5"></a>vim /etc/filebeat/filebeat.yml
</code></pre></div>
Die filebeat.yml ist die Konfig-Datei für Filebeat.</p>
<p><strong>Konfiguration</strong>
Auf jeder Maschine muss eine Filebeat/Beat Konfigurationsdatei angelegt werden. 
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#installation-02_1_installation_three_node_cluster-__codelineno-23-1"></a>...
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#installation-02_1_installation_three_node_cluster-__codelineno-23-2"></a>#----------------Filebeat Input--------------------
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#installation-02_1_installation_three_node_cluster-__codelineno-23-3"></a>filebeat.inputs:
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#installation-02_1_installation_three_node_cluster-__codelineno-23-4"></a>- type: log   #Hier wird ein Typ angegeben
<a id="__codelineno-23-5" name="__codelineno-23-5" href="#installation-02_1_installation_three_node_cluster-__codelineno-23-5"></a>  enabled: true
<a id="__codelineno-23-6" name="__codelineno-23-6" href="#installation-02_1_installation_three_node_cluster-__codelineno-23-6"></a>  paths:      #Hier werden die Pfade zu den Daten angeben
<a id="__codelineno-23-7" name="__codelineno-23-7" href="#installation-02_1_installation_three_node_cluster-__codelineno-23-7"></a>    - /var/log/*.log
<a id="__codelineno-23-8" name="__codelineno-23-8" href="#installation-02_1_installation_three_node_cluster-__codelineno-23-8"></a>
<a id="__codelineno-23-9" name="__codelineno-23-9" href="#installation-02_1_installation_three_node_cluster-__codelineno-23-9"></a>#--------------------Logstash Output--------------------
<a id="__codelineno-23-10" name="__codelineno-23-10" href="#installation-02_1_installation_three_node_cluster-__codelineno-23-10"></a>output.logstash
<a id="__codelineno-23-11" name="__codelineno-23-11" href="#installation-02_1_installation_three_node_cluster-__codelineno-23-11"></a>  hosts: [&quot;localhost:5044&quot;]
</code></pre></div></p>
<p>Möchte man Module nutzen, müssen diese per <code>filebeat module enable MODULNAME</code> angeschaltet werden. Die Module liegen unter <em>/etc/filebeat/modules</em>. Das Kommando benennt die Datei von <em>MODULNAME-disabled.yml</em> in <em>MODULNAME.yml</em></p></section><section class="print-page" id="installation-test"><h1 id="installation-test-foldable-section">Foldable section</h1>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="installation-test-__tabbed_1_1" name="installation-test-__tabbed_1" type="radio" /><input id="installation-test-__tabbed_1_2" name="installation-test-__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="installation-test-__tabbed_1_1"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M8.22 2.97a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042l2.97-2.97H3.75a.75.75 0 0 1 0-1.5h7.44L8.22 4.03a.75.75 0 0 1 0-1.06Z"/></svg></span> inline end</label><label for="installation-test-__tabbed_1_2">seperate code</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="admonition info inline end">
<p class="admonition-title">Lesson learned</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#installation-test-__codelineno-0-1"></a>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#installation-test-__codelineno-0-2"></a>euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#installation-test-__codelineno-0-3"></a>purus auctor massa, nec semper lorem quam in massa.
</code></pre></div>
</div>
<p>Die gesamte <code>elasticsearch.yml</code> ist im folgenden zu sehen. Es gibt viele Vortiele das ganze so darzustellen.   </p>
</div>
<div class="tabbed-block">
<p><details><summary>Full elasticsearch.yml</summary></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#installation-test-__codelineno-1-1"></a><span class="w">    </span><span class="c1"># ----------------------------Cluster------------------</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#installation-test-__codelineno-1-2"></a>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#installation-test-__codelineno-1-3"></a><span class="w">    </span><span class="c1">#-------------------------------Node------------------</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#installation-test-__codelineno-1-4"></a><span class="w">    </span><span class="nt">node.name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">localhost</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#installation-test-__codelineno-1-5"></a>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#installation-test-__codelineno-1-6"></a>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#installation-test-__codelineno-1-7"></a><span class="w">    </span><span class="c1"># Set the bind address to a specific IP (IPv4 or IPv6): </span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#installation-test-__codelineno-1-8"></a><span class="w">     </span><span class="nt">network.host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">localhost</span><span class="w"> </span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#installation-test-__codelineno-1-9"></a><span class="w">    </span><span class="c1">#</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#installation-test-__codelineno-1-10"></a><span class="w">    </span><span class="c1"># Set a custom port for HTTP: </span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#installation-test-__codelineno-1-11"></a><span class="w">     </span><span class="nt">http.port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">9200</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#installation-test-__codelineno-1-12"></a><span class="w">    </span><span class="c1"># elasticsearch.host: [&quot;http://localhost:9200&quot;]</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#installation-test-__codelineno-1-13"></a>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#installation-test-__codelineno-1-14"></a><span class="w">    </span><span class="c1"># --------------------------------- Discovery ----------------------------------</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#installation-test-__codelineno-1-15"></a><span class="w">    </span><span class="c1">#</span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#installation-test-__codelineno-1-16"></a><span class="w">    </span><span class="c1"># Pass an initial list of hosts to perform discovery when this node is started:</span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#installation-test-__codelineno-1-17"></a><span class="w">    </span><span class="c1"># The default list of hosts is [&quot;127.0.0.1&quot;, &quot;[::1]&quot;]</span>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#installation-test-__codelineno-1-18"></a><span class="w">    </span><span class="c1">#</span>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#installation-test-__codelineno-1-19"></a><span class="w">    </span><span class="nt">discovery.seed_hosts</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;127.0.0.1&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#installation-test-__codelineno-1-20"></a><span class="w">    </span><span class="c1">#</span>
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#installation-test-__codelineno-1-21"></a><span class="w">    </span><span class="c1"># Bootstrap the cluster using an initial set of master-eligible nodes:</span>
<a id="__codelineno-1-22" name="__codelineno-1-22" href="#installation-test-__codelineno-1-22"></a><span class="w">    </span><span class="c1">#</span>
<a id="__codelineno-1-23" name="__codelineno-1-23" href="#installation-test-__codelineno-1-23"></a><span class="w">    </span><span class="c1">#----------------------- BEGIN SECURITY AUTO CONFIGURATION -----------------------</span>
<a id="__codelineno-1-24" name="__codelineno-1-24" href="#installation-test-__codelineno-1-24"></a><span class="w">    </span><span class="c1">#</span>
<a id="__codelineno-1-25" name="__codelineno-1-25" href="#installation-test-__codelineno-1-25"></a><span class="w">    </span><span class="c1"># The following settings, TLS certificates, and keys have been automatically      </span>
<a id="__codelineno-1-26" name="__codelineno-1-26" href="#installation-test-__codelineno-1-26"></a><span class="w">    </span><span class="c1"># generated to configure Elasticsearch security features on 28-08-2023 14:32:16</span>
<a id="__codelineno-1-27" name="__codelineno-1-27" href="#installation-test-__codelineno-1-27"></a><span class="w">    </span><span class="c1">#</span>
<a id="__codelineno-1-28" name="__codelineno-1-28" href="#installation-test-__codelineno-1-28"></a><span class="w">    </span><span class="c1"># --------------------------------------------------------------------------------</span>
<a id="__codelineno-1-29" name="__codelineno-1-29" href="#installation-test-__codelineno-1-29"></a>
<a id="__codelineno-1-30" name="__codelineno-1-30" href="#installation-test-__codelineno-1-30"></a><span class="w">    </span><span class="c1"># Enable security features</span>
<a id="__codelineno-1-31" name="__codelineno-1-31" href="#installation-test-__codelineno-1-31"></a>
<a id="__codelineno-1-32" name="__codelineno-1-32" href="#installation-test-__codelineno-1-32"></a><span class="w">    </span><span class="nt">xpack.security.enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-1-33" name="__codelineno-1-33" href="#installation-test-__codelineno-1-33"></a><span class="w">    </span><span class="nt">xpack.security.enrollment.enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-1-34" name="__codelineno-1-34" href="#installation-test-__codelineno-1-34"></a>
<a id="__codelineno-1-35" name="__codelineno-1-35" href="#installation-test-__codelineno-1-35"></a><span class="w">    </span><span class="c1"># Enable encryption for HTTP API client connections, such as Kibana, Logstash, and Agents</span>
<a id="__codelineno-1-36" name="__codelineno-1-36" href="#installation-test-__codelineno-1-36"></a><span class="w">    </span><span class="nt">xpack.security.http.ssl</span><span class="p">:</span>
<a id="__codelineno-1-37" name="__codelineno-1-37" href="#installation-test-__codelineno-1-37"></a><span class="w">      </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-1-38" name="__codelineno-1-38" href="#installation-test-__codelineno-1-38"></a><span class="w">      </span><span class="nt">keystore.path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/elasticsearch/certs/http.p12</span>
<a id="__codelineno-1-39" name="__codelineno-1-39" href="#installation-test-__codelineno-1-39"></a>
<a id="__codelineno-1-40" name="__codelineno-1-40" href="#installation-test-__codelineno-1-40"></a><span class="w">    </span><span class="c1"># Enable encryption and mutual authentication between cluster nodes</span>
<a id="__codelineno-1-41" name="__codelineno-1-41" href="#installation-test-__codelineno-1-41"></a><span class="w">    </span><span class="nt">xpack.security.transport.ssl</span><span class="p">:</span>
<a id="__codelineno-1-42" name="__codelineno-1-42" href="#installation-test-__codelineno-1-42"></a><span class="w">      </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-1-43" name="__codelineno-1-43" href="#installation-test-__codelineno-1-43"></a><span class="w">      </span><span class="nt">verification_mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">certificate</span>
<a id="__codelineno-1-44" name="__codelineno-1-44" href="#installation-test-__codelineno-1-44"></a><span class="w">      </span><span class="nt">keystore.path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/elasticsearch/certs/transport.p12</span>
<a id="__codelineno-1-45" name="__codelineno-1-45" href="#installation-test-__codelineno-1-45"></a><span class="w">      </span><span class="nt">truststore.path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/elasticsearch/certs/certs/transport.p12</span>
<a id="__codelineno-1-46" name="__codelineno-1-46" href="#installation-test-__codelineno-1-46"></a><span class="w">    </span><span class="c1"># Create a new cluster with the current node only</span>
<a id="__codelineno-1-47" name="__codelineno-1-47" href="#installation-test-__codelineno-1-47"></a><span class="w">    </span><span class="c1"># Additional nodes can still join the cluster later</span>
<a id="__codelineno-1-48" name="__codelineno-1-48" href="#installation-test-__codelineno-1-48"></a><span class="w">    </span><span class="c1"># Wenn DNS genutzt werden soll/wird, muss hier der FQDN des Servers stehen</span>
<a id="__codelineno-1-49" name="__codelineno-1-49" href="#installation-test-__codelineno-1-49"></a><span class="w">    </span><span class="nt">cluster.initial_master_nodes</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;localhost.localdomain&quot;</span><span class="p p-Indicator">]</span>
</code></pre></div>
</details>
</div>
</div>
</div></section><h1 class='nav-section-title-end'>Ended: Installation</h1></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; Computacenter 2024
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "/", "features": ["navigation.instant.preview", "content.code.annotate", "content.code.copy", "content.tooltips", "navigation.indexes", "navigation.instant", "navigation.sections", "navigation.top", "search.highlight", "search.suggest"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.8fd75fb4.min.js"></script>
      
        <script src="../js/print-site.js"></script>
      
        <script src="../assets/javascripts/extra/refresh-on-toggle-dark-light.js"></script>
      
        <script src="https://unpkg.com/tablesort@5.3.0/dist/tablesort.min.js"></script>
      
        <script src="../assets/javascripts/extra/tablesort.js"></script>
      
        <script src="https://unpkg.com/mermaid@10.7.0/dist/mermaid.min.js"></script>
      
    
  </body>
</html>